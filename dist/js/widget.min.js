var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,t){var i=null;e.event?(i=e,i.file_url&&(i.file_format=n(i.file_url)),i.company_id=a,i.display_id=s,t(i)):t(i)}function t(){var e=new Date,t=e.getUTCFullYear(),n=e.getUTCMonth()+1,i=e.getUTCDate();return 10>n&&(n="0"+n),10>i&&(i="0"+i),t+n+i}function n(e){var t,n=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),n.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function i(e){var n={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:t(),rows:[{insertId:""}]},i=JSON.parse(JSON.stringify(n));return i.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),i.rows[0].json=JSON.parse(JSON.stringify(e)),i.rows[0].json.ts=(new Date).toISOString(),i}function o(t,n){e(n,function(e){null!==e&&RiseVision.Common.Logger.log(t,e)})}function r(e,t){a=e,s=t}var s="",a="";return{getInsertData:i,getFileFormat:n,logEvent:o,setIds:r}}(),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-d<358e4?e({}):(t.open("POST",o,!0),t.onloadend=function(){var n=JSON.parse(t.response);e({token:n.access_token,refreshedAt:new Date})},t.send(),void 0)}function n(e){return s&&l===e}function i(i,o){function c(t){var n,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",i),d=t.refreshedAt||d,u=t.token||u,n=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(n))}if(!(!i||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&n(o.event)))return s=!0,l=o.event,setTimeout(function(){s=!1},a),t(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:i}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var t=new XMLHttpRequest;e&&"function"==typeof e&&(t.open("GET",n+"ping?callback=_",!0),t.onreadystatechange=function(){try{4===t.readyState&&(i=!0,200===t.status?(o=!0,e(!0,t.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(n){console.debug("Caught exception: ",n.description)}},t.send())}function t(e,t,r){function s(){var t,i,s;o?t=r?n+"?url="+encodeURIComponent(e):n+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?t=e:(i=e.split("?"),s=1===i.length?"?":"&",t=e+s+"cb="+(new Date).getTime()),a("HEAD",t)}function a(e,n){var i=new XMLHttpRequest,r={xhr:i,url:n};o?(i.open(e,n,!0),i.addEventListener("loadend",function(){var o=i.status||0;o>=200&&300>o?t(r):"HEAD"===e?a("GET",n):t(r,new Error("The request failed with status code: "+o))}),i.send()):t(r)}if(e&&t&&"function"==typeof t)return i?s():this.ping(s)}var n="//localhost:9494/",i=!1,o=!1;return{getFile:t,ping:e}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family:"+t.font.family+"; ",i="color: "+(t.color?t.color:t.forecolor)+"; ",o="font-size: "+(-1===t.size.indexOf("px")?t.size+"px; ":t.size+"; "),r="font-weight: "+(t.bold?"bold":"normal")+"; ",s="font-style: "+(t.italic?"italic":"normal")+"; ",a="text-decoration: "+(t.underline?"underline":"none")+"; ",l="background-color: "+(t.highlightColor?t.highlightColor:t.backcolor)+"; ";return"."+e+" {"+n+i+o+r+s+a+l+"}"}function t(e){for(var t=document.createElement("style"),n=0,i=e.length;i>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,r){n.forEach(function(n){n.class&&n.fontSetting&&t([e(n.class,n.fontSetting)]),n.fontSetting.font.type&&("custom"===n.fontSetting.font.type&&n.fontSetting.font.family&&n.fontSetting.font.url?i(n.fontSetting.font.family,n.fontSetting.font.url,r):"google"===n.fontSetting.font.type&&n.fontSetting.font.family&&o(n.fontSetting.font.family,r))})}function i(e,t,n){var i=null,o="font-family: "+e+"; src: url('"+t+"');";n=n||document,i=n.styleSheets[0],null!==i&&i.addRule("@font-face",o)}function o(e,t){var n=document.createElement("link");t=t||document,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://fonts.googleapis.com/css?family="+e.split(",")[0]),null!==n&&t.getElementsByTagName("head")[0].appendChild(n)}function r(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i]=new Image,n[i].src=e[i]}function s(e){for(var t,n=window.location.search.substring(1),i=n.split("&"),o=0;o<i.length;o++)if(t=i[o].split("="),t[0]==e)return decodeURIComponent(t[1]);return""}function a(e){var t="";switch(e){case 404:t="The file does not exist or cannot be accessed.";break;case 507:t="There is not enough disk space to save the file on Rise Cache.";break;default:t="There was a problem retrieving the file from Rise Cache."}return t}return{getQueryParameter:s,getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:i,loadGoogleFont:o,preloadImages:r,getRiseCacheErrorMessage:a}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.Image={},RiseVision.Image=function(e){"use strict";function t(){e.rpc.call("","rsevent_ready",null,I.getString("id"),!0,!0,!0,!0,!0)}function n(){e.rpc.call("","rsevent_done",null,I.getString("id")),null!==O&&d(O,!0),d({event:"done",file_url:r()},!1)}function i(){clearTimeout(A),A=null}function o(){i(),A=setTimeout(function(){n()},5e3)}function r(){var e=-1;if(T&&T.length>0){if("file"===E)return T[0];if("folder"===E&&S&&S.isReady()&&(e=S.getCurrentSlide(),-1!==e))return T[e]}return null}function s(){var e,n=document.getElementById("container"),i=document.createDocumentFragment(),o=document.createElement("div");b=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),b.show("Please wait while your image is downloaded."),V.background&&Object.keys(V.background).length>0&&(document.body.style.background=V.background.color),"file"===E?(o.setAttribute("id","image"),o.className=V.position,o.className=V.scaleToFit?o.className+" scale-to-fit":o.className,i.appendChild(o),n.appendChild(i),e=0!==Object.keys(V.storage).length,e?(L="storage file",w=new RiseVision.Image.StorageFile(V),w.init()):(L="custom",C=new RiseVision.Image.NonStorage(V),C.init())):"folder"===E&&(o.className="tp-banner-container",i.appendChild(o),n.appendChild(i),L="storage folder",w=new RiseVision.Image.StorageFolder(V),w.init()),t()}function a(e){var t=document.querySelector("#container #image");t.style.backgroundImage="url("+e+")"}function l(){return N}function d(e,t){t&&(O=e),RiseVision.Common.LoggerUtils.logEvent(v(),e)}function u(e){"file"===E?(T[0]=e,b.hide(),a(T[0])):"folder"===E&&(T=e,S=new RiseVision.Image.Slider(V),S.init(e))}function c(e){"file"===E?(T[0]=e,a(T[0])):"folder"===E&&(T=e,S.refresh(T)),k=!1,N=!1,O=null}function g(e,t){V=_.clone(e),E=t,V.width=I.getInt("rsW"),V.height=I.getInt("rsH"),document.getElementById("container").style.height=I.getInt("rsH")+"px",s()}function m(){b.hide(),x||S.play()}function f(){n()}function p(){x=!0,i(),"folder"===E&&S&&S.isReady()&&S.pause()}function h(){return x=!1,F||(d({event:"configuration",event_details:L},!1),F=!0),d({event:"play",file_url:r()},!1),k?(o(),void 0):("folder"===E&&S&&S.isReady()&&S.play(),void 0)}function v(){return"image_events"}function R(e,t){k=!0,N="undefined"!=typeof t,b.show(e),"folder"===E&&S&&S.isReady()&&S.destroy(),x||o()}function y(){p()}var E,I=new e.Prefs,b=null,V=null,w=null,C=null,S=null,T=[],O=null,L=null,A=null,k=!1,N=!1,F=!1,x=!0;return{hasStorageError:l,logEvent:d,onFileInit:u,onFileRefresh:c,onSliderComplete:f,onSliderReady:m,pause:p,play:h,setAdditionalParams:g,getTableName:v,showError:R,stop:y}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.Slider=function(e){"use strict";function t(){var t=document.querySelector(".tp-banner ul"),n=document.createDocumentFragment(),i=[],o=null,r=null,s="";m=p.length,p.forEach(function(t){switch(o=document.createElement("li"),r=document.createElement("img"),o.setAttribute("data-transition","fade"),o.setAttribute("data-masterspeed",500),o.setAttribute("data-delay",1e3*e.duration),r.src=t.url,e.position){case"top-left":s="left top";break;case"top-center":s="center top";break;case"top-right":s="right top";break;case"middle-left":s="left center";break;case"middle-center":s="center center";break;case"middle-right":s="right center";break;case"bottom-left":s="left bottom";break;case"bottom-center":s="center bottom";break;case"bottom-right":s="right bottom";break;default:s="left top"}r.setAttribute("data-bgposition",s),e.scaleToFit?r.setAttribute("data-bgfit","contain"):r.setAttribute("data-bgfit","normal"),o.appendChild(r),i.push(o)}),i.forEach(function(e){n.appendChild(e)}),t.appendChild(n)}function n(e){V?c():y&&(y=!1,c(),RiseVision.Image.onSliderComplete(),E&&(f&&(i(),l(h)),E=!1)),e.slideIndex===m&&(y=!0)}function i(){$("body").off("touchend"),f.off("revolution.slide.onloaded"),f.off("revolution.slide.onchange"),f.revkill(),f=null}function o(){V=!0,clearTimeout(R),R=setTimeout(function(){f.revnext(),f.revresume(),V=!1,b=!0},1e3*e.pause),r()}function r(){e.autoHide&&(clearTimeout(v),v=setTimeout(function(){$(".tp-leftarrow, .tp-rightarrow").addClass("hidearrows")},w))}function s(){f&&(y=!1,c(),i())}function a(){return f&&p&&p.length>0?f.revcurrentslide():-1}function l(i){var s=document.querySelector(".tp-banner-container"),a=document.createDocumentFragment(),l=document.createElement("div"),d=document.createElement("ul");l.setAttribute("class","tp-banner"),l.appendChild(d),a.appendChild(l),s.appendChild(a),p=_.clone(i),t(),I=!0,f=$(".tp-banner").revolution({hideThumbs:0,hideTimerBar:"on",navigationType:"none",onHoverStop:"off",startwidth:e.width,startheight:e.height}),f.on("revolution.slide.onloaded",function(){c(),I=!1,RiseVision.Image.onSliderReady()}),f.on("revolution.slide.onchange",function(e,t){n(t)}),$("body").on("touchend",".tp-banner",function(){o(),$(".tp-leftarrow, .tp-rightarrow").removeClass("hidearrows")}),$("body").on("touchend",".tp-leftarrow, .tp-rightarrow",function(){o()}),r()}function d(){return!I}function u(){f&&(e.hasOwnProperty("resume")&&!e.resume&&f.revshowslide(0),b||(f.revresume(),b=!0))}function c(){f&&b&&(f.revpause(),b=!1)}function g(e){RiseVision.Common.Utilities.preloadImages(e),h=_.clone(e),E=!0}var m=0,f=null,p=null,h=null,v=null,R=null,y=!1,E=!1,I=!0,b=!1,V=!1,w=3e3;return{getCurrentSlide:a,destroy:s,init:l,isReady:d,play:u,pause:c,refresh:g}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.StorageFile=function(e){"use strict";function t(){var t=document.querySelector("rise-storage");t.addEventListener("rise-storage-response",function(e){var t;e.detail&&e.detail.url&&(t=e.detail.url.replace("'","\\'"),n?(n=!1,RiseVision.Image.onFileInit(t)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Image.onFileRefresh(t):RiseVision.Image.hasStorageError()&&RiseVision.Image.onFileRefresh(e.detail.url)))}),t.addEventListener("rise-storage-api-error",function(e){var t={event:"error",event_details:"storage api error",error_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-no-file",function(e){var t={event:"error",event_details:"storage file not found",file_url:e.detail},n=document.getElementById("image");n.style.background="",RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("The selected image does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-file-throttled",function(e){var t={event:"error",event_details:"storage file throttled",file_url:e.detail};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("The selected image is temporarily unavailable.")}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"error",event_details:"storage subscription expired"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-error",function(e){var t=e.detail&&e.detail.request&&e.detail.request.url?e.detail.request.url:null,n={event:"error",event_details:"rise storage error",error_details:"The request failed with status code: "+e.detail.error.currentTarget.status,file_url:t};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var t=e.detail&&e.detail.request&&e.detail.request.url?e.detail.request.url:null,n={event:"error",event_details:"rise cache error",error_details:e.detail.error.message,file_url:t};RiseVision.Image.logEvent(n,!0);var i=0;e.detail.error.message&&(i=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var o=RiseVision.Common.Utilities.getRiseCacheErrorMessage(i);RiseVision.Image.showError(o)}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go()}var n=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.StorageFolder=function(e){"use strict";function t(e){var t;e.detail&&(e.detail.added&&r.push({name:e.detail.name,url:e.detail.url}),e.detail.changed&&(t=_.find(r,function(t){return t.name===e.detail.name}),t.url=e.detail.url),e.detail.deleted&&(r=_.reject(r,function(t){return t.name===e.detail.name}))),r=_.sortBy(r,function(e){return e.name.toLowerCase()})}function n(e){return t(e),e.detail.added&&o?(r.length>1?(o=!1,clearTimeout(s),RiseVision.Image.onFileInit(r)):s=setTimeout(function(){o=!1,RiseVision.Image.onFileInit(r)},5e3),void 0):((!e.detail.hasOwnProperty("changed")||e.detail.changed||RiseVision.Image.hasStorageError())&&RiseVision.Image.onFileRefresh(r),void 0)}function i(){var t=document.querySelector("rise-storage");t.addEventListener("rise-storage-response",n),t.addEventListener("rise-storage-api-error",function(e){var t={event:"error",event_details:"storage api error",error_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"error",event_details:"storage folder empty"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("The selected folder does not contain any images.")}),t.addEventListener("rise-storage-no-folder",function(e){var t={event:"error",event_details:"storage folder doesn't exist",error_details:e.detail};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("The selected folder does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-folder-invalid",function(){var e={event:"error",event_details:"storage folder format(s) invalid"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("The selected folder does not contain any supported image formats.")}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"error",event_details:"storage subscription expired"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Image.logEvent(t,!0);var n=0;e.detail.error.message&&(n=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var i=RiseVision.Common.Utilities.getRiseCacheErrorMessage(n);RiseVision.Image.showError(i)}),t.setAttribute("fileType","image"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go()}var o=!0,r=[],s=null;return{init:i}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.NonStorage=function(e){"use strict";function t(e){var t;o.getFile(l,function(e,i){if(i){t={event:"error",event_details:"non-storage error",error_details:i.message,file_url:e.url},RiseVision.Image.logEvent(t,!0);var o=0;i.message&&(o=+i.message.substring(i.message.indexOf(":")+2));var r=RiseVision.Common.Utilities.getRiseCacheErrorMessage(o);RiseVision.Image.showError(r)}else a?(a=!1,RiseVision.Image.onFileInit(e.url),n()):RiseVision.Image.onFileRefresh(e.url)},e)}function n(){null===s&&(s=setInterval(function(){t(!1)},r))}function i(){l=e.url&&""!==e.url?e.url:e.selector.url,t(!0)}var o=RiseVision.Common.RiseCache,r=3e5,s=null,a=!0,l="";return{init:i}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function n(){try{t.style.height=e.style.height}catch(n){console.warn("Can't initialize Message - ",n.message)}}function i(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function o(n){var i,o=document.createDocumentFragment();r?(i=t.querySelector(".message"),i.innerHTML=n):(e.style.visibility="hidden",t.style.display="block",i=document.createElement("p"),i.innerHTML=n,i.setAttribute("class","message"),o.appendChild(i),t.appendChild(o),r=!0)}var r=!1;return n(),{hide:i,show:o}},function(e,t,n){"use strict";function i(e,t){var n,i,o="",r="";Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(o=t[0]),"displayId"===e[1]&&(r=t[1]?t[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,r),"additionalParams"===e[2]&&(n=JSON.parse(t[2]),i=0!==Object.keys(n.storage).length?n.storage.fileName?"file":"folder":"file",RiseVision.Image.setAdditionalParams(n,i)))}function o(){RiseVision.Image.pause()}function r(){RiseVision.Image.play()}function s(){RiseVision.Image.stop()}function a(){e.removeEventListener("WebComponentsReady",a),l&&""!==l&&(n.rpc.register("rscmd_play_"+l,r),n.rpc.register("rscmd_pause_"+l,o),n.rpc.register("rscmd_stop_"+l,s),n.rpc.register("rsparam_set_"+l,i),n.rpc.call("","rsparam_get",null,l,["companyId","displayId","additionalParams"]))}var l=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},e.addEventListener("WebComponentsReady",a)}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdldEV2ZW50UGFyYW1zIiwicGFyYW1zIiwiY2IiLCJqc29uIiwiZXZlbnQiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImNvbXBhbnlfaWQiLCJjb21wYW55SWQiLCJkaXNwbGF5X2lkIiwiZGlzcGxheUlkIiwiZ2V0U3VmZml4IiwiZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsImdldFVUQ01vbnRoIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsInVybCIsInN0ciIsImhhc1BhcmFtcyIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwidGVzdCIsImluZGV4T2YiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsImdldEluc2VydERhdGEiLCJCQVNFX0lOU0VSVF9TQ0hFTUEiLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInRlbXBsYXRlU3VmZml4Iiwicm93cyIsImluc2VydElkIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJ0b0lTT1N0cmluZyIsImxvZ0V2ZW50IiwidGFibGUiLCJMb2dnZXIiLCJsb2ciLCJzZXRJZHMiLCJjb21wYW55IiwiZGlzcGxheSIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiY2FsbGJhY2siLCJyIiwiQkFTRV9DQUNIRV9VUkwiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiX3BpbmdSZWNlaXZlZCIsInN0YXR1cyIsIl9pc0NhY2hlUnVubmluZyIsInJlc3BvbnNlVGV4dCIsImNvbnNvbGUiLCJkZWJ1ZyIsImUiLCJkZXNjcmlwdGlvbiIsImdldEZpbGUiLCJmaWxlVXJsIiwibm9jYWNoZWJ1c3RlciIsImZpbGVSZXF1ZXN0Iiwic2VwYXJhdG9yIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0VGltZSIsInNwbGl0IiwibWFrZVJlcXVlc3QiLCJtZXRob2QiLCJyZXF1ZXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkVycm9yIiwidGhpcyIsIlV0aWxpdGllcyIsImdldEZvbnRDc3NTdHlsZSIsImNsYXNzTmFtZSIsImZvbnRPYmoiLCJmYW1pbHkiLCJmb250IiwiY29sb3IiLCJmb3JlY29sb3IiLCJzaXplIiwid2VpZ2h0IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImhpZ2hsaWdodCIsImhpZ2hsaWdodENvbG9yIiwiYmFja2NvbG9yIiwiYWRkQ1NTUnVsZXMiLCJydWxlcyIsInN0eWxlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJoZWFkIiwibG9hZEZvbnRzIiwic2V0dGluZ3MiLCJjb250ZW50RG9jIiwiZm9yRWFjaCIsIml0ZW0iLCJjbGFzcyIsImZvbnRTZXR0aW5nIiwidHlwZSIsImxvYWRDdXN0b21Gb250IiwibG9hZEdvb2dsZUZvbnQiLCJzaGVldCIsInJ1bGUiLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJzdHlsZXNoZWV0Iiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwcmVsb2FkSW1hZ2VzIiwidXJscyIsImltYWdlcyIsIkltYWdlIiwic3JjIiwiZ2V0UXVlcnlQYXJhbWV0ZXIiLCJwYXJhbSIsInBhaXIiLCJxdWVyeSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsImRlY29kZVVSSUNvbXBvbmVudCIsImdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJjb25maWciLCJnYWRnZXRzIiwiX3JlYWR5IiwicnBjIiwiY2FsbCIsIl9wcmVmcyIsImdldFN0cmluZyIsIl9kb25lIiwiX2Vycm9yTG9nIiwiX2dldEN1cnJlbnRGaWxlIiwiX2NsZWFyRXJyb3JUaW1lciIsImNsZWFyVGltZW91dCIsIl9lcnJvclRpbWVyIiwiX3N0YXJ0RXJyb3JUaW1lciIsInNsaWRlTnVtIiwiX2N1cnJlbnRGaWxlcyIsIl9tb2RlIiwiX3NsaWRlciIsImlzUmVhZHkiLCJnZXRDdXJyZW50U2xpZGUiLCJpbml0IiwiaXNTdG9yYWdlRmlsZSIsImNvbnRhaW5lciIsImdldEVsZW1lbnRCeUlkIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiZWwiLCJfbWVzc2FnZSIsIk1lc3NhZ2UiLCJzaG93IiwiX3BhcmFtcyIsImJhY2tncm91bmQiLCJPYmplY3QiLCJrZXlzIiwiYm9keSIsInBvc2l0aW9uIiwic2NhbGVUb0ZpdCIsInN0b3JhZ2UiLCJfY29uZmlndXJhdGlvblR5cGUiLCJfc3RvcmFnZSIsIlN0b3JhZ2VGaWxlIiwiX25vblN0b3JhZ2UiLCJOb25TdG9yYWdlIiwiU3RvcmFnZUZvbGRlciIsInNldFNpbmdsZUltYWdlIiwiaW1hZ2UiLCJxdWVyeVNlbGVjdG9yIiwiYmFja2dyb3VuZEltYWdlIiwiaGFzU3RvcmFnZUVycm9yIiwiX3N0b3JhZ2VFcnJvckZsYWciLCJpc0Vycm9yIiwiZ2V0VGFibGVOYW1lIiwib25GaWxlSW5pdCIsImhpZGUiLCJTbGlkZXIiLCJvbkZpbGVSZWZyZXNoIiwicmVmcmVzaCIsIl9lcnJvckZsYWciLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwiYWRkaXRpb25hbFBhcmFtcyIsIm1vZGVUeXBlIiwiXyIsImNsb25lIiwid2lkdGgiLCJnZXRJbnQiLCJoZWlnaHQiLCJvblNsaWRlclJlYWR5IiwiX3ZpZXdlclBhdXNlZCIsInBsYXkiLCJvblNsaWRlckNvbXBsZXRlIiwicGF1c2UiLCJfY29uZmlndXJhdGlvbkxvZ2dlZCIsImV2ZW50X2RldGFpbHMiLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiaXNTdG9yYWdlRXJyb3IiLCJkZXN0cm95Iiwic3RvcCIsIlByZWZzIiwiYWRkU2xpZGVzIiwibGlzdCIsInNsaWRlcyIsInNsaWRlIiwidG90YWxTbGlkZXMiLCJjdXJyZW50RmlsZXMiLCJmaWxlIiwiZHVyYXRpb24iLCJwdXNoIiwib25TbGlkZUNoYW5nZWQiLCJpc0ludGVyYWN0aW5nIiwiaXNMYXN0U2xpZGUiLCJyZWZyZXNoU2xpZGVyIiwiJGFwaSIsImRlc3Ryb3lTbGlkZXIiLCJuZXdGaWxlcyIsInNsaWRlSW5kZXgiLCIkIiwib2ZmIiwicmV2a2lsbCIsImhhbmRsZVVzZXJBY3Rpdml0eSIsInNsaWRlVGltZXIiLCJyZXZuZXh0IiwicmV2cmVzdW1lIiwiaXNQbGF5aW5nIiwiaGlkZU5hdiIsImF1dG9IaWRlIiwibmF2VGltZXIiLCJhZGRDbGFzcyIsIm5hdlRpbWVvdXQiLCJyZXZjdXJyZW50c2xpZGUiLCJmaWxlcyIsInRwQmFubmVyQ29udGFpbmVyIiwidHBCYW5uZXIiLCJ1bCIsImlzTG9hZGluZyIsInJldm9sdXRpb24iLCJoaWRlVGh1bWJzIiwiaGlkZVRpbWVyQmFyIiwibmF2aWdhdGlvblR5cGUiLCJvbkhvdmVyU3RvcCIsInN0YXJ0d2lkdGgiLCJzdGFydGhlaWdodCIsIm9uIiwicmVtb3ZlQ2xhc3MiLCJyZXN1bWUiLCJyZXZzaG93c2xpZGUiLCJyZXZwYXVzZSIsImRldGFpbCIsIl9pbml0aWFsTG9hZCIsImNoYW5nZWQiLCJlcnJvcl9kZXRhaWxzIiwiY29kZSIsImltZyIsImVycm9yIiwiY3VycmVudFRhcmdldCIsImZvbGRlciIsImZpbGVOYW1lIiwiZ28iLCJwcm9jZXNzVXJsIiwiYWRkZWQiLCJfZmlsZXMiLCJuYW1lIiwiZmluZCIsImRlbGV0ZWQiLCJyZWplY3QiLCJzb3J0QnkiLCJoYW5kbGVSZXNwb25zZSIsIl9pc0xvYWRpbmciLCJfdGltZXIiLCJfZ2V0RmlsZSIsIm9taXRDYWNoZUJ1c3RlciIsInJpc2VDYWNoZSIsIl91cmwiLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJzZWxlY3RvciIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJ3YXJuIiwiX2FjdGl2ZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInZpc2liaWxpdHkiLCJwIiwiaW5uZXJIVE1MIiwiY29uZmlndXJlIiwibmFtZXMiLCJ2YWx1ZXMiLCJtb2RlIiwiQXJyYXkiLCJpc0FycmF5IiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlkIiwicmVnaXN0ZXIiLCJvbmNvbnRleHRtZW51Iiwib25tb3VzZWRvd24iLCJfZ2FxIiwiZ2EiLCJhc3luYyIsInByb3RvY29sIiwicyIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLHVCQUNGQyxjQUFlLGlCQUNmQyxpQkFBa0IsNEVBQ2xCQyxx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RSxHQUFhLEtBQVBBLElBQ1IvSyxFQUFRRSxJQUFJOEssU0FBUyxjQUFnQkQsRUFBSTVHLEdBQ3pDbkUsRUFBUUUsSUFBSThLLFNBQVMsZUFBaUJELEVBQUkxRyxHQUMxQ3JFLEVBQVFFLElBQUk4SyxTQUFTLGNBQWdCRCxFQUFJbkcsR0FDekM1RSxFQUFRRSxJQUFJOEssU0FBUyxlQUFpQkQsRUFBSVIsR0FDMUN2SyxFQUFRRSxJQUFJQyxLQUFLLEdBQUksY0FBZSxLQUFNNEssR0FBSyxZQUFhLFlBQWEsc0JBN0U3RSxHQUFJQSxJQUFLLEdBQUkvSyxHQUFRNkUsT0FBUXhFLFVBQVUsS0FFdkNsQixHQUFPOEwsY0FBZ0IsV0FDckIsT0FBTyxHQUdUOU4sRUFBUzhFLEtBQUtpSixZQUFjLFdBQzFCLE9BQU8sR0EwRVQvTCxFQUFPdEQsaUJBQWlCLHFCQUFzQmdQLElBRTdDMUwsT0FBUWhDLFNBQVU2QyxRQUdyQixJQUFJbUwsTUFBT0EsUUFFWEEsTUFBSzdGLE1BQU0sY0FBZSxrQkFDMUI2RixLQUFLN0YsTUFBTSxtQkFFWCxXQUNFLEdBQUk4RixHQUFLak8sU0FBU0MsY0FBYyxTQUFXZ08sR0FBR3BOLEtBQU8sa0JBQW1Cb04sRUFBR0MsT0FBUSxFQUNuRkQsRUFBR3RNLEtBQU8sVUFBWTNCLFNBQVNpQyxTQUFTa00sU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSXBPLFNBQVNzQixxQkFBcUIsVUFBVSxFQUFJOE0sR0FBRUMsV0FBV0MsYUFBYUwsRUFBSUciLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBXSURHRVRfQ09NTU9OX0NPTkZJRyA9IHtcbiAgQVVUSF9QQVRIX1VSTDogXCJ2MS93aWRnZXQvYXV0aFwiLFxuICBMT0dHRVJfQ0xJRU5UX0lEOiBcIjEwODg1MjcxNDcxMDktNnExbzJ2dGlobjM0MjkycGp0NGNraG1oY2swcmswbzcuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIixcbiAgTE9HR0VSX0NMSUVOVF9TRUNSRVQ6IFwibmxaeXJjUExnNm9Fd085ZjlXZm4yOVdoXCIsXG4gIExPR0dFUl9SRUZSRVNIX1RPS0VOOiBcIjEveHp0NGt3ekUxSDdXOVZuS0I4Y0FhQ3g2emI0RXM0bktFb3FhWUhkVEQxNUlnT3JKRHRkdW42eks2WGlBVENLVFwiLFxuICBTVE9SQUdFX0VOVjogXCJwcm9kXCIsXG4gIFNUT1JFX1VSTDogXCJodHRwczovL3N0b3JlLWRvdC1ydmFzZXJ2ZXIyLmFwcHNwb3QuY29tL1wiXG59O1xuLyogZ2xvYmFsIGdhZGdldHMgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMgPSAoZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gICB2YXIgZGlzcGxheUlkID0gXCJcIixcbiAgICBjb21wYW55SWQgPSBcIlwiO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogUmV0cmlldmUgcGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSBldmVudCBsb2dnZXIuICovXG4gIGZ1bmN0aW9uIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgY2IpIHtcbiAgICB2YXIganNvbiA9IG51bGw7XG5cbiAgICAvLyBldmVudCBpcyByZXF1aXJlZC5cbiAgICBpZiAocGFyYW1zLmV2ZW50KSB7XG4gICAgICBqc29uID0gcGFyYW1zO1xuXG4gICAgICBpZiAoanNvbi5maWxlX3VybCkge1xuICAgICAgICBqc29uLmZpbGVfZm9ybWF0ID0gZ2V0RmlsZUZvcm1hdChqc29uLmZpbGVfdXJsKTtcbiAgICAgIH1cblxuICAgICAganNvbi5jb21wYW55X2lkID0gY29tcGFueUlkO1xuICAgICAganNvbi5kaXNwbGF5X2lkID0gZGlzcGxheUlkO1xuXG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgc3VmZml4IGZvciBCUSB0YWJsZSBuYW1lLlxuICBmdW5jdGlvbiBnZXRTdWZmaXgoKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiB5ZWFyICsgbW9udGggKyBkYXk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldEZpbGVGb3JtYXQodXJsKSB7XG4gICAgdmFyIGhhc1BhcmFtcyA9IC9bPyMmXS8sXG4gICAgICBzdHI7XG5cbiAgICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzdHIgPSB1cmwuc3Vic3RyKHVybC5sYXN0SW5kZXhPZihcIi5cIikgKyAxKTtcblxuICAgIC8vIGRvbid0IGluY2x1ZGUgYW55IHBhcmFtcyBhZnRlciB0aGUgZmlsZW5hbWVcbiAgICBpZiAoaGFzUGFyYW1zLnRlc3Qoc3RyKSkge1xuICAgICAgc3RyID0gc3RyLnN1YnN0cigwICwoc3RyLmluZGV4T2YoXCI/XCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIj9cIikgOiBzdHIubGVuZ3RoKTtcblxuICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAoc3RyLmluZGV4T2YoXCIjXCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIiNcIikgOiBzdHIubGVuZ3RoKTtcblxuICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAoc3RyLmluZGV4T2YoXCImXCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIiZcIikgOiBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbnNlcnREYXRhKHBhcmFtcykge1xuICAgIHZhciBCQVNFX0lOU0VSVF9TQ0hFTUEgPSB7XG4gICAgICBcImtpbmRcIjogXCJiaWdxdWVyeSN0YWJsZURhdGFJbnNlcnRBbGxSZXF1ZXN0XCIsXG4gICAgICBcInNraXBJbnZhbGlkUm93c1wiOiBmYWxzZSxcbiAgICAgIFwiaWdub3JlVW5rbm93blZhbHVlc1wiOiBmYWxzZSxcbiAgICAgIFwidGVtcGxhdGVTdWZmaXhcIjogZ2V0U3VmZml4KCksXG4gICAgICBcInJvd3NcIjogW3tcbiAgICAgICAgXCJpbnNlcnRJZFwiOiBcIlwiXG4gICAgICB9XVxuICAgIH0sXG4gICAgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoQkFTRV9JTlNFUlRfU0NIRU1BKSk7XG5cbiAgICBkYXRhLnJvd3NbMF0uaW5zZXJ0SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMikudG9VcHBlckNhc2UoKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24udHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHRhYmxlLCBwYXJhbXMpIHtcbiAgICBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIGlmIChqc29uICE9PSBudWxsKSB7XG4gICAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlci5sb2codGFibGUsIGpzb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyogU2V0IHRoZSBDb21wYW55IGFuZCBEaXNwbGF5IElEcy4gKi9cbiAgZnVuY3Rpb24gc2V0SWRzKGNvbXBhbnksIGRpc3BsYXkpIHtcbiAgICBjb21wYW55SWQgPSBjb21wYW55O1xuICAgIGRpc3BsYXlJZCA9IGRpc3BsYXk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SW5zZXJ0RGF0YVwiOiBnZXRJbnNlcnREYXRhLFxuICAgIFwiZ2V0RmlsZUZvcm1hdFwiOiBnZXRGaWxlRm9ybWF0LFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJzZXRJZHNcIjogc2V0SWRzXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHRhYmxlTmFtZSk7XG4gICAgICByZWZyZXNoRGF0ZSA9IHJlZnJlc2hEYXRhLnJlZnJlc2hlZEF0IHx8IHJlZnJlc2hEYXRlO1xuICAgICAgdG9rZW4gPSByZWZyZXNoRGF0YS50b2tlbiB8fCB0b2tlbjtcbiAgICAgIGluc2VydERhdGEgPSB1dGlscy5nZXRJbnNlcnREYXRhKHBhcmFtcyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgZGF0YS5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgICBpZiAocGFyYW1zLmNiICYmIHR5cGVvZiBwYXJhbXMuY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGFyYW1zLmNiKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGluc2VydERhdGEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVmcmVzaFRva2VuKGluc2VydFdpdGhUb2tlbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibG9nXCI6IGxvZ1xuICB9O1xufSkoUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMpO1xudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlID0gKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIEJBU0VfQ0FDSEVfVVJMID0gXCIvL2xvY2FsaG9zdDo5NDk0L1wiO1xuXG4gIHZhciBfcGluZ1JlY2VpdmVkID0gZmFsc2UsXG4gICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gcGluZyhjYWxsYmFjaykge1xuICAgIHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgci5vcGVuKFwiR0VUXCIsIEJBU0VfQ0FDSEVfVVJMICsgXCJwaW5nP2NhbGxiYWNrPV9cIiwgdHJ1ZSk7XG4gICAgci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgIC8vIHNhdmUgdGhpcyByZXN1bHQgZm9yIHVzZSBpbiBnZXRGaWxlKClcbiAgICAgICAgICBfcGluZ1JlY2VpdmVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmKHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZ1wiKTtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiQ2F1Z2h0IGV4Y2VwdGlvbjogXCIsIGUuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgfTtcbiAgICByLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGUoZmlsZVVybCwgY2FsbGJhY2ssIG5vY2FjaGVidXN0ZXIpIHtcbiAgICBpZiAoIWZpbGVVcmwgfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoKSB7XG4gICAgICB2YXIgdXJsLCBzdHIsIHNlcGFyYXRvcjtcblxuICAgICAgaWYgKF9pc0NhY2hlUnVubmluZykge1xuICAgICAgICAvLyBjb25maWd1cmUgdXJsIHdpdGggY2FjaGVidXN0ZXIgb3Igbm90XG4gICAgICAgIHVybCA9IChub2NhY2hlYnVzdGVyKSA/IEJBU0VfQ0FDSEVfVVJMICsgXCI/dXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVVcmwpIDpcbiAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgaWYgKF9pc0NhY2hlUnVubmluZykge1xuICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG5cbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgICAgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2VydmVyIG1heSBub3Qgc3VwcG9ydCBIRUFEIHJlcXVlc3QuIEZhbGxiYWNrIHRvIGEgR0VUIHJlcXVlc3QuXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkhFQURcIikge1xuICAgICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCwgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgc3RhdHVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFJpc2UgQ2FjaGUgaXMgbm90IHJ1bm5pbmcgKHByZXZpZXcpLCBza2lwIEhFQUQgcmVxdWVzdCBhbmQgZXhlY3V0ZSBjYWxsYmFjayBpbW1lZGlhdGVseVxuICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmICghX3BpbmdSZWNlaXZlZCkge1xuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgcmV0dXJuIHRoaXMucGluZyhmaWxlUmVxdWVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaWxlUmVxdWVzdCgpO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRGaWxlOiBnZXRGaWxlLFxuICAgIHBpbmc6IHBpbmdcbiAgfTtcblxufSkoKTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OlwiICsgZm9udE9iai5mb250LmZhbWlseSArIFwiOyBcIjtcbiAgICB2YXIgY29sb3IgPSBcImNvbG9yOiBcIiArIChmb250T2JqLmNvbG9yID8gZm9udE9iai5jb2xvciA6IGZvbnRPYmouZm9yZWNvbG9yKSArIFwiOyBcIjtcbiAgICB2YXIgc2l6ZSA9IFwiZm9udC1zaXplOiBcIiArIChmb250T2JqLnNpemUuaW5kZXhPZihcInB4XCIpID09PSAtMSA/IGZvbnRPYmouc2l6ZSArIFwicHg7IFwiIDogZm9udE9iai5zaXplICsgXCI7IFwiKTtcbiAgICB2YXIgd2VpZ2h0ID0gXCJmb250LXdlaWdodDogXCIgKyAoZm9udE9iai5ib2xkID8gXCJib2xkXCIgOiBcIm5vcm1hbFwiKSArIFwiOyBcIjtcbiAgICB2YXIgaXRhbGljID0gXCJmb250LXN0eWxlOiBcIiArIChmb250T2JqLml0YWxpYyA/IFwiaXRhbGljXCIgOiBcIm5vcm1hbFwiKSArIFwiOyBcIjtcbiAgICB2YXIgdW5kZXJsaW5lID0gXCJ0ZXh0LWRlY29yYXRpb246IFwiICsgKGZvbnRPYmoudW5kZXJsaW5lID8gXCJ1bmRlcmxpbmVcIiA6IFwibm9uZVwiKSArIFwiOyBcIjtcbiAgICB2YXIgaGlnaGxpZ2h0ID0gXCJiYWNrZ3JvdW5kLWNvbG9yOiBcIiArIChmb250T2JqLmhpZ2hsaWdodENvbG9yID8gZm9udE9iai5oaWdobGlnaHRDb2xvciA6IGZvbnRPYmouYmFja2NvbG9yKSArIFwiOyBcIjtcblxuICAgIHJldHVybiBcIi5cIiArIGNsYXNzTmFtZSArIFwiIHtcIiArIGZhbWlseSArIGNvbG9yICsgc2l6ZSArIHdlaWdodCArIGl0YWxpYyArIHVuZGVybGluZSArIGhpZ2hsaWdodCArIFwifVwiO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ1NTUnVsZXMocnVsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gcnVsZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGVzW2ldKSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICAvKlxuICAgKiBMb2FkcyBHb29nbGUgb3IgY3VzdG9tIGZvbnRzLCBpZiBhcHBsaWNhYmxlLCBhbmQgaW5qZWN0cyBDU1Mgc3R5bGVzXG4gICAqIGludG8gdGhlIGhlYWQgb2YgdGhlIGRvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gICAgYXJyYXkgICAgc2V0dGluZ3MgICAgQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgZm9ybTpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbe1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRhdGVcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiYmxhY2tcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiB7XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHk6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogXCJBa3JvbmltXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlZlcmRhbmFcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ29vZ2xlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cDovL2N1c3RvbS1mb250LXVybFwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogXCIyMFwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2VcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgKlxuICAgKiAgICAgICAgICAgb2JqZWN0ICAgY29udGVudERvYyAgICBEb2N1bWVudCBvYmplY3QgaW50byB3aGljaCB0byBpbmplY3Qgc3R5bGVzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBsb2FkIGZvbnRzIChvcHRpb25hbCkuXG4gICAqL1xuICBmdW5jdGlvbiBsb2FkRm9udHMoc2V0dGluZ3MsIGNvbnRlbnREb2MpIHtcbiAgICBzZXR0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtLmNsYXNzICYmIGl0ZW0uZm9udFNldHRpbmcpIHtcbiAgICAgICAgYWRkQ1NTUnVsZXMoWyBnZXRGb250Q3NzU3R5bGUoaXRlbS5jbGFzcywgaXRlbS5mb250U2V0dGluZykgXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtLmZvbnRTZXR0aW5nLmZvbnQudHlwZSkge1xuICAgICAgICBpZiAoaXRlbS5mb250U2V0dGluZy5mb250LnR5cGUgPT09IFwiY3VzdG9tXCIgJiYgaXRlbS5mb250U2V0dGluZy5mb250LmZhbWlseSAmJlxuICAgICAgICAgIGl0ZW0uZm9udFNldHRpbmcuZm9udC51cmwpIHtcbiAgICAgICAgICBsb2FkQ3VzdG9tRm9udChpdGVtLmZvbnRTZXR0aW5nLmZvbnQuZmFtaWx5LCBpdGVtLmZvbnRTZXR0aW5nLmZvbnQudXJsLFxuICAgICAgICAgICAgY29udGVudERvYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbS5mb250U2V0dGluZy5mb250LnR5cGUgPT09IFwiZ29vZ2xlXCIgJiYgaXRlbS5mb250U2V0dGluZy5mb250LmZhbWlseSkge1xuICAgICAgICAgIGxvYWRHb29nbGVGb250KGl0ZW0uZm9udFNldHRpbmcuZm9udC5mYW1pbHksIGNvbnRlbnREb2MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkQ3VzdG9tRm9udChmYW1pbHksIHVybCwgY29udGVudERvYykge1xuICAgIHZhciBzaGVldCA9IG51bGw7XG4gICAgdmFyIHJ1bGUgPSBcImZvbnQtZmFtaWx5OiBcIiArIGZhbWlseSArIFwiOyBcIiArIFwic3JjOiB1cmwoJ1wiICsgdXJsICsgXCInKTtcIjtcblxuICAgIGNvbnRlbnREb2MgPSBjb250ZW50RG9jIHx8IGRvY3VtZW50O1xuXG4gICAgc2hlZXQgPSBjb250ZW50RG9jLnN0eWxlU2hlZXRzWzBdO1xuXG4gICAgaWYgKHNoZWV0ICE9PSBudWxsKSB7XG4gICAgICBzaGVldC5hZGRSdWxlKFwiQGZvbnQtZmFjZVwiLCBydWxlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkR29vZ2xlRm9udChmYW1pbHksIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc3R5bGVzaGVldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG4gICAgY29udGVudERvYyA9IGNvbnRlbnREb2MgfHwgZG9jdW1lbnQ7XG5cbiAgICBzdHlsZXNoZWV0LnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XG4gICAgc3R5bGVzaGVldC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9jc3NcIik7XG5cbiAgICAvLyBzcGxpdCB0byBhY2NvdW50IGZvciBmYW1pbHkgdmFsdWUgY29udGFpbmluZyBhIGZhbGxiYWNrIChlZy4gQWxhZGluLHNhbnMtc2VyaWYpXG4gICAgc3R5bGVzaGVldC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PVwiICsgZmFtaWx5LnNwbGl0KFwiLFwiKVswXSk7XG5cbiAgICBpZiAoc3R5bGVzaGVldCAhPT0gbnVsbCkge1xuICAgICAgY29udGVudERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoc3R5bGVzaGVldCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcHJlbG9hZEltYWdlcyh1cmxzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHVybHMubGVuZ3RoLFxuICAgICAgaW1hZ2VzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpbWFnZXNbaV0gPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlc1tpXS5zcmMgPSB1cmxzW2ldO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1ldGVyKHBhcmFtKSB7XG4gICAgdmFyIHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSksXG4gICAgICB2YXJzID0gcXVlcnkuc3BsaXQoXCImXCIpLFxuICAgICAgcGFpcjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xuICAgICAgcGFpciA9IHZhcnNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICBpZiAocGFpclswXSA9PSBwYXJhbSkge1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgICBzd2l0Y2ggKHN0YXR1c0NvZGUpIHtcbiAgICAgIGNhc2UgNDA0OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZSBmaWxlIGRvZXMgbm90IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDUwNzpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGVyZSBpcyBub3QgZW5vdWdoIGRpc2sgc3BhY2UgdG8gc2F2ZSB0aGUgZmlsZSBvbiBSaXNlIENhY2hlLlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSByZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gUmlzZSBDYWNoZS5cIjtcbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRRdWVyeVBhcmFtZXRlcjogZ2V0UXVlcnlQYXJhbWV0ZXIsXG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgZ2V0Rm9udENzc1N0eWxlLFxuICAgIGFkZENTU1J1bGVzOiAgICAgIGFkZENTU1J1bGVzLFxuICAgIGxvYWRGb250czogICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICBsb2FkQ3VzdG9tRm9udCxcbiAgICBsb2FkR29vZ2xlRm9udDogICBsb2FkR29vZ2xlRm9udCxcbiAgICBwcmVsb2FkSW1hZ2VzOiAgICBwcmVsb2FkSW1hZ2VzLFxuICAgIGdldFJpc2VDYWNoZUVycm9yTWVzc2FnZTogZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlXG4gIH07XG59KSgpO1xuXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwibG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG59XG5cbnZhciBjb25maWcgPSB7XG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIlxufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5JbWFnZSA9IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlID0gKGZ1bmN0aW9uIChnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfbW9kZTtcblxuICB2YXIgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBfbWVzc2FnZSA9IG51bGwsXG4gICAgX3BhcmFtcyA9IG51bGw7XG5cbiAgdmFyIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfbm9uU3RvcmFnZSA9IG51bGwsXG4gICAgX3NsaWRlciA9IG51bGw7XG5cbiAgdmFyIF9jdXJyZW50RmlsZXMgPSBbXTtcblxuICB2YXIgX2Vycm9yTG9nID0gbnVsbCxcbiAgICBfY29uZmlndXJhdGlvblR5cGUgPSBudWxsLFxuICAgIF9lcnJvclRpbWVyID0gbnVsbCxcbiAgICBfZXJyb3JGbGFnID0gZmFsc2UsXG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZSxcbiAgICBfY29uZmlndXJhdGlvbkxvZ2dlZCA9IGZhbHNlO1xuXG4gIHZhciBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG5cbiAgICAvLyBBbnkgZXJyb3JzIG5lZWQgdG8gYmUgbG9nZ2VkIGJlZm9yZSB0aGUgZG9uZSBldmVudC5cbiAgICBpZiAoX2Vycm9yTG9nICE9PSBudWxsKSB7XG4gICAgICBsb2dFdmVudChfZXJyb3JMb2csIHRydWUpO1xuICAgIH1cblxuICAgIC8vIGxvZyBcImRvbmVcIiBldmVudFxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcImRvbmVcIiwgXCJmaWxlX3VybFwiOiBfZ2V0Q3VycmVudEZpbGUoKSB9LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXJFcnJvclRpbWVyKCkge1xuICAgIGNsZWFyVGltZW91dChfZXJyb3JUaW1lcik7XG4gICAgX2Vycm9yVGltZXIgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0RXJyb3JUaW1lcigpIHtcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBfZXJyb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbm90aWZ5IFZpZXdlciB3aWRnZXQgaXMgZG9uZVxuICAgICAgX2RvbmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZSgpIHtcbiAgICB2YXIgc2xpZGVOdW0gPSAtMTtcblxuICAgIGlmIChfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1swXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkpIHtcbiAgICAgICAgLy8gcmV0cmlldmUgdGhlIGN1cnJlbnRseSBwbGF5ZWQgc2xpZGVcbiAgICAgICAgc2xpZGVOdW0gPSBfc2xpZGVyLmdldEN1cnJlbnRTbGlkZSgpO1xuXG4gICAgICAgIGlmIChzbGlkZU51bSAhPT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1tzbGlkZU51bV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICBpc1N0b3JhZ2VGaWxlO1xuXG4gICAgLy8gY3JlYXRlIGluc3RhbmNlIG9mIG1lc3NhZ2VcbiAgICBfbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlQ29udGFpbmVyXCIpKTtcblxuICAgIC8vIHNob3cgd2FpdCBtZXNzYWdlXG4gICAgX21lc3NhZ2Uuc2hvdyhcIlBsZWFzZSB3YWl0IHdoaWxlIHlvdXIgaW1hZ2UgaXMgZG93bmxvYWRlZC5cIik7XG5cbiAgICAvLyBsZWdhY3lcbiAgICBpZiAoX3BhcmFtcy5iYWNrZ3JvdW5kICYmIE9iamVjdC5rZXlzKF9wYXJhbXMuYmFja2dyb3VuZCkubGVuZ3RoID4gMCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gX3BhcmFtcy5iYWNrZ3JvdW5kLmNvbG9yO1xuICAgIH1cblxuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIGNyZWF0ZSB0aGUgaW1hZ2UgPGRpdj4gd2l0aGluIHRoZSBjb250YWluZXIgPGRpdj5cbiAgICAgIGVsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiaW1hZ2VcIik7XG4gICAgICBlbC5jbGFzc05hbWUgPSBfcGFyYW1zLnBvc2l0aW9uO1xuICAgICAgZWwuY2xhc3NOYW1lID0gX3BhcmFtcy5zY2FsZVRvRml0ID8gZWwuY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCIgOiBlbC5jbGFzc05hbWU7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIGlzU3RvcmFnZUZpbGUgPSAoT2JqZWN0LmtleXMoX3BhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApO1xuXG4gICAgICBpZiAoIWlzU3RvcmFnZUZpbGUpIHtcbiAgICAgICAgX2NvbmZpZ3VyYXRpb25UeXBlID0gXCJjdXN0b21cIjtcblxuICAgICAgICBfbm9uU3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLk5vblN0b3JhZ2UoX3BhcmFtcyk7XG4gICAgICAgIF9ub25TdG9yYWdlLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9jb25maWd1cmF0aW9uVHlwZSA9IFwic3RvcmFnZSBmaWxlXCI7XG5cbiAgICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZpbGUgaW5zdGFuY2VcbiAgICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5JbWFnZS5TdG9yYWdlRmlsZShfcGFyYW1zKTtcbiAgICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gY3JlYXRlIHRoZSBzbGlkZXIgY29udGFpbmVyIDxkaXY+IHdpdGhpbiB0aGUgY29udGFpbmVyIDxkaXY+XG4gICAgICBlbC5jbGFzc05hbWUgPSBcInRwLWJhbm5lci1jb250YWluZXJcIjtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2NvbmZpZ3VyYXRpb25UeXBlID0gXCJzdG9yYWdlIGZvbGRlclwiO1xuXG4gICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZm9sZGVyIGluc3RhbmNlXG4gICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLlN0b3JhZ2VGb2xkZXIoX3BhcmFtcyk7XG4gICAgICBfc3RvcmFnZS5pbml0KCk7XG4gICAgfVxuXG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTaW5nbGVJbWFnZSh1cmwpIHtcbiAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRhaW5lciAjaW1hZ2VcIik7XG4gICAgaW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyB1cmwgKyBcIilcIjtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGFzU3RvcmFnZUVycm9yKCkge1xuICAgIHJldHVybiBfc3RvcmFnZUVycm9yRmxhZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcywgaXNFcnJvcikge1xuICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICBfZXJyb3JMb2cgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMubG9nRXZlbnQoZ2V0VGFibGVOYW1lKCksIHBhcmFtcyk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVJbml0KHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmdcbiAgICAgIF9jdXJyZW50RmlsZXNbMF0gPSB1cmxzO1xuXG4gICAgICAvLyByZW1vdmUgYSBtZXNzYWdlIHByZXZpb3VzbHkgc2hvd25cbiAgICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgICAgc2V0U2luZ2xlSW1hZ2UoX2N1cnJlbnRGaWxlc1swXSk7XG5cbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXlcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuXG4gICAgICAvLyBjcmVhdGUgc2xpZGVyIGluc3RhbmNlXG4gICAgICBfc2xpZGVyID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU2xpZGVyKF9wYXJhbXMpO1xuICAgICAgX3NsaWRlci5pbml0KHVybHMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZVJlZnJlc2godXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZyBvZiBvbmUgdXJsXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcblxuICAgICAgc2V0U2luZ2xlSW1hZ2UoX2N1cnJlbnRGaWxlc1swXSk7XG5cbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXkgb2YgdXJsc1xuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG5cbiAgICAgIF9zbGlkZXIucmVmcmVzaChfY3VycmVudEZpbGVzKTtcbiAgICB9XG5cbiAgICAvLyBpbiBjYXNlIHJlZnJlc2hlZCBmaWxlIGZpeGVzIGFuIGVycm9yIHdpdGggcHJldmlvdXMgZmlsZSwgZW5zdXJlIGZsYWcgaXMgcmVtb3ZlZCBzbyBwbGF5YmFjayBpcyBhdHRlbXB0ZWQgYWdhaW5cbiAgICBfZXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfZXJyb3JMb2cgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlVHlwZSkge1xuICAgIF9wYXJhbXMgPSBfLmNsb25lKGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgIF9tb2RlID0gbW9kZVR5cGU7XG5cbiAgICBfcGFyYW1zLndpZHRoID0gX3ByZWZzLmdldEludChcInJzV1wiKTtcbiAgICBfcGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuICAgIGluaXQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2xpZGVyUmVhZHkoKSB7XG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBfc2xpZGVyLnBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNsaWRlckNvbXBsZXRlKCkge1xuICAgIF9kb25lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICAgIC8vIGluIGNhc2UgZXJyb3IgdGltZXIgc3RpbGwgcnVubmluZyAobm8gY29uZGl0aW9uYWwgY2hlY2sgb24gZXJyb3JGbGFnLCBpdCBtYXkgaGF2ZSBiZWVuIHJlc2V0IGluIG9uRmlsZVJlZnJlc2gpXG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgaWYgKF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIF9zbGlkZXIucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGlmICghX2NvbmZpZ3VyYXRpb25Mb2dnZWQpIHtcbiAgICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcImNvbmZpZ3VyYXRpb25cIiwgXCJldmVudF9kZXRhaWxzXCI6IF9jb25maWd1cmF0aW9uVHlwZSB9LCBmYWxzZSk7XG4gICAgICBfY29uZmlndXJhdGlvbkxvZ2dlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwicGxheVwiLCBcImZpbGVfdXJsXCI6IF9nZXRDdXJyZW50RmlsZSgpIH0sIGZhbHNlKTtcblxuICAgIGlmIChfZXJyb3JGbGFnKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIF9zbGlkZXIucGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRhYmxlTmFtZSgpIHtcbiAgICByZXR1cm4gXCJpbWFnZV9ldmVudHNcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlLCBpc1N0b3JhZ2VFcnJvcikge1xuICAgIF9lcnJvckZsYWcgPSB0cnVlO1xuICAgIF9zdG9yYWdlRXJyb3JGbGFnID0gdHlwZW9mIGlzU3RvcmFnZUVycm9yICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgX21lc3NhZ2Uuc2hvdyhtZXNzYWdlKTtcblxuICAgIC8vIGRlc3Ryb3kgc2xpZGVyIGlmIGl0IGV4aXN0cyBhbmQgcHJldmlvdXNseSBub3RpZmllZCByZWFkeVxuICAgIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIiAmJiBfc2xpZGVyICYmIF9zbGlkZXIuaXNSZWFkeSgpKSB7XG4gICAgICBfc2xpZGVyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIHBhdXNlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaGFzU3RvcmFnZUVycm9yXCI6IGhhc1N0b3JhZ2VFcnJvcixcbiAgICBcImxvZ0V2ZW50XCI6IGxvZ0V2ZW50LFxuICAgIFwib25GaWxlSW5pdFwiOiBvbkZpbGVJbml0LFxuICAgIFwib25GaWxlUmVmcmVzaFwiOiBvbkZpbGVSZWZyZXNoLFxuICAgIFwib25TbGlkZXJDb21wbGV0ZVwiOiBvblNsaWRlckNvbXBsZXRlLFxuICAgIFwib25TbGlkZXJSZWFkeVwiOiBvblNsaWRlclJlYWR5LFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJnZXRUYWJsZU5hbWVcIjogZ2V0VGFibGVOYW1lLFxuICAgIFwic2hvd0Vycm9yXCI6IHNob3dFcnJvcixcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xufSkoZ2FkZ2V0cyk7XG5cbi8qIGdsb2JhbCBfICovXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlID0gUmlzZVZpc2lvbi5JbWFnZSB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZS5TbGlkZXIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB0b3RhbFNsaWRlcyA9IDAsXG4gICAgJGFwaSA9IG51bGwsXG4gICAgY3VycmVudEZpbGVzID0gbnVsbCxcbiAgICBuZXdGaWxlcyA9IG51bGwsXG4gICAgbmF2VGltZXIgPSBudWxsLFxuICAgIHNsaWRlVGltZXIgPSBudWxsLFxuICAgIGlzTGFzdFNsaWRlID0gZmFsc2UsXG4gICAgcmVmcmVzaFNsaWRlciA9IGZhbHNlLFxuICAgIGlzTG9hZGluZyA9IHRydWUsXG4gICAgaXNQbGF5aW5nID0gZmFsc2UsXG4gICAgaXNJbnRlcmFjdGluZyA9IGZhbHNlLFxuICAgIG5hdlRpbWVvdXQgPSAzMDAwO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGFkZFNsaWRlcygpIHtcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHAtYmFubmVyIHVsXCIpLFxuICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBzbGlkZXMgPSBbXSxcbiAgICAgIHNsaWRlID0gbnVsbCxcbiAgICAgIGltYWdlID0gbnVsbCxcbiAgICAgIHBvc2l0aW9uID0gXCJcIjtcblxuICAgIHRvdGFsU2xpZGVzID0gY3VycmVudEZpbGVzLmxlbmd0aDtcblxuICAgIGN1cnJlbnRGaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgIHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uXG4gICAgICBzbGlkZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRyYW5zaXRpb25cIiwgXCJmYWRlXCIpO1xuICAgICAgc2xpZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXN0ZXJzcGVlZFwiLCA1MDApO1xuICAgICAgc2xpZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1kZWxheVwiLCBwYXJhbXMuZHVyYXRpb24gKiAxMDAwKTtcblxuICAgICAgaW1hZ2Uuc3JjID0gZmlsZS51cmw7XG5cbiAgICAgIC8vIEFsaWdubWVudFxuICAgICAgc3dpdGNoIChwYXJhbXMucG9zaXRpb24pIHtcbiAgICAgICAgY2FzZSBcInRvcC1sZWZ0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgdG9wXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0b3AtY2VudGVyXCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImNlbnRlciB0b3BcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRvcC1yaWdodFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJyaWdodCB0b3BcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1pZGRsZS1sZWZ0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgY2VudGVyXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtaWRkbGUtY2VudGVyXCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImNlbnRlciBjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1pZGRsZS1yaWdodFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJyaWdodCBjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJvdHRvbS1sZWZ0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgYm90dG9tXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJib3R0b20tY2VudGVyXCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImNlbnRlciBib3R0b21cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJvdHRvbS1yaWdodFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJyaWdodCBib3R0b21cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCB0b3BcIjtcbiAgICAgIH1cblxuICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1iZ3Bvc2l0aW9uXCIsIHBvc2l0aW9uKTtcblxuICAgICAgLy8gU2NhbGUgdG8gRml0XG4gICAgICBpZiAocGFyYW1zLnNjYWxlVG9GaXQpIHtcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1iZ2ZpdFwiLCBcImNvbnRhaW5cIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1iZ2ZpdFwiLCBcIm5vcm1hbFwiKTtcbiAgICAgIH1cblxuICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQoaW1hZ2UpO1xuICAgICAgc2xpZGVzLnB1c2goc2xpZGUpO1xuICAgIH0pO1xuXG4gICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24oc2xpZGUpIHtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHNsaWRlKTtcbiAgICB9KTtcblxuICAgIGxpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25TbGlkZUNoYW5nZWQoZGF0YSkge1xuICAgIGlmIChpc0ludGVyYWN0aW5nKSB7XG4gICAgICBwYXVzZSgpO1xuICAgIH1cbiAgICAvLyBEb24ndCBjYWxsIFwiZG9uZVwiIGlmIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc2xpZGVzaG93LlxuICAgIGVsc2Uge1xuICAgICAgaWYgKGlzTGFzdFNsaWRlKSB7XG4gICAgICAgIGlzTGFzdFNsaWRlID0gZmFsc2U7XG4gICAgICAgIHBhdXNlKCk7XG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25TbGlkZXJDb21wbGV0ZSgpO1xuXG4gICAgICAgIGlmIChyZWZyZXNoU2xpZGVyKSB7XG4gICAgICAgICAgLy8gRGVzdHJveSBhbmQgcmVjcmVhdGUgdGhlIHNsaWRlciBpZiB0aGUgZmlsZXMgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgIGlmICgkYXBpKSB7XG4gICAgICAgICAgICBkZXN0cm95U2xpZGVyKCk7XG4gICAgICAgICAgICBpbml0KG5ld0ZpbGVzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZWZyZXNoU2xpZGVyID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zbGlkZUluZGV4ID09PSB0b3RhbFNsaWRlcykge1xuICAgICAgaXNMYXN0U2xpZGUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3lTbGlkZXIoKSB7XG4gICAgLy8gUmVtb3ZlIGV2ZW50IGhhbmRsZXJzLlxuICAgICQoXCJib2R5XCIpLm9mZihcInRvdWNoZW5kXCIpO1xuICAgICRhcGkub2ZmKFwicmV2b2x1dGlvbi5zbGlkZS5vbmxvYWRlZFwiKTtcbiAgICAkYXBpLm9mZihcInJldm9sdXRpb24uc2xpZGUub25jaGFuZ2VcIik7XG5cbiAgICAvLyBMZXQgdGhlIHNsaWRlciBjbGVhbiB1cCBhZnRlciBpdHNlbGYuXG4gICAgJGFwaS5yZXZraWxsKCk7XG4gICAgJGFwaSA9IG51bGw7XG4gIH1cblxuICAvLyBVc2VyIGhhcyBpbnRlcmFjdGVkIHdpdGggdGhlIHNsaWRlc2hvdy5cbiAgZnVuY3Rpb24gaGFuZGxlVXNlckFjdGl2aXR5KCkge1xuICAgIGlzSW50ZXJhY3RpbmcgPSB0cnVlO1xuICAgIGNsZWFyVGltZW91dChzbGlkZVRpbWVyKTtcblxuICAgIC8vIE1vdmUgdG8gbmV4dCBzbGlkZSBhbmQgcmVzdW1lIHRoZSBzbGlkZXNob3cgYWZ0ZXIgYSBkZWxheS5cbiAgICBzbGlkZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRhcGkucmV2bmV4dCgpO1xuICAgICAgJGFwaS5yZXZyZXN1bWUoKTtcblxuICAgICAgaXNJbnRlcmFjdGluZyA9IGZhbHNlO1xuICAgICAgaXNQbGF5aW5nID0gdHJ1ZTtcbiAgICB9LCBwYXJhbXMucGF1c2UgKiAxMDAwKTtcblxuICAgIGhpZGVOYXYoKTtcbiAgfVxuXG4gIC8vIEhpZGUgdGhlIG5hdmlnYXRpb24gYWZ0ZXIgYSBkZWxheS5cbiAgZnVuY3Rpb24gaGlkZU5hdigpIHtcbiAgICBpZiAocGFyYW1zLmF1dG9IaWRlKSB7XG4gICAgICBjbGVhclRpbWVvdXQobmF2VGltZXIpO1xuXG4gICAgICBuYXZUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIudHAtbGVmdGFycm93LCAudHAtcmlnaHRhcnJvd1wiKS5hZGRDbGFzcyhcImhpZGVhcnJvd3NcIik7XG4gICAgICB9LCBuYXZUaW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICogIFRPRE86IFRlc3Qgd2hhdCBoYXBwZW5zIHdoZW4gZm9sZGVyIGlzbid0IGZvdW5kLlxuICAgKi9cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBpZiAoJGFwaSkge1xuICAgICAgaXNMYXN0U2xpZGUgPSBmYWxzZTtcbiAgICAgIHBhdXNlKCk7XG4gICAgICBkZXN0cm95U2xpZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudFNsaWRlKCkge1xuICAgIGlmICgkYXBpICYmIGN1cnJlbnRGaWxlcyAmJiBjdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuICRhcGkucmV2Y3VycmVudHNsaWRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdChmaWxlcykge1xuICAgIHZhciB0cEJhbm5lckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHAtYmFubmVyLWNvbnRhaW5lclwiKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgdHBCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG5cbiAgICB0cEJhbm5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRwLWJhbm5lclwiKTtcbiAgICB0cEJhbm5lci5hcHBlbmRDaGlsZCh1bCk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodHBCYW5uZXIpO1xuICAgIHRwQmFubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIGN1cnJlbnRGaWxlcyA9IF8uY2xvbmUoZmlsZXMpO1xuXG4gICAgYWRkU2xpZGVzKCk7XG5cbiAgICBpc0xvYWRpbmcgPSB0cnVlO1xuICAgICRhcGkgPSAkKFwiLnRwLWJhbm5lclwiKS5yZXZvbHV0aW9uKHtcbiAgICAgIFwiaGlkZVRodW1ic1wiOiAwLFxuICAgICAgXCJoaWRlVGltZXJCYXJcIjogXCJvblwiLFxuICAgICAgXCJuYXZpZ2F0aW9uVHlwZVwiOiBcIm5vbmVcIixcbiAgICAgIFwib25Ib3ZlclN0b3BcIjogXCJvZmZcIixcbiAgICAgIFwic3RhcnR3aWR0aFwiOiBwYXJhbXMud2lkdGgsXG4gICAgICBcInN0YXJ0aGVpZ2h0XCI6IHBhcmFtcy5oZWlnaHRcbiAgICB9KTtcblxuICAgICRhcGkub24oXCJyZXZvbHV0aW9uLnNsaWRlLm9ubG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUGF1c2Ugc2xpZGVzaG93IHNpbmNlIGl0IHdpbGwgYXV0b3BsYXkgYW5kIHRoaXMgaXMgbm90IGNvbmZpZ3VyYWJsZS5cbiAgICAgIHBhdXNlKCk7XG4gICAgICBpc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25TbGlkZXJSZWFkeSgpO1xuICAgIH0pO1xuXG4gICAgJGFwaS5vbihcInJldm9sdXRpb24uc2xpZGUub25jaGFuZ2VcIiwgZnVuY3Rpb24gKGUsIGRhdGEpIHtcbiAgICAgIG9uU2xpZGVDaGFuZ2VkKGRhdGEpO1xuICAgIH0pO1xuXG4gICAgLy8gU3dpcGUgdGhlIHNsaWRlci5cbiAgICAkKFwiYm9keVwiKS5vbihcInRvdWNoZW5kXCIsIFwiLnRwLWJhbm5lclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIGhhbmRsZVVzZXJBY3Rpdml0eSgpO1xuICAgICAgJChcIi50cC1sZWZ0YXJyb3csIC50cC1yaWdodGFycm93XCIpLnJlbW92ZUNsYXNzKFwiaGlkZWFycm93c1wiKTtcbiAgICB9KTtcblxuICAgIC8vIFRvdWNoIHRoZSBuYXZpZ2F0aW9uIGFycm93cy5cbiAgICAkKFwiYm9keVwiKS5vbihcInRvdWNoZW5kXCIsIFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBoYW5kbGVVc2VyQWN0aXZpdHkoKTtcbiAgICB9KTtcblxuICAgIGhpZGVOYXYoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUmVhZHkoKSB7XG4gICAgcmV0dXJuICFpc0xvYWRpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIGlmICgkYXBpKSB7XG4gICAgICAvLyBSZXNldCBzbGlkZXNob3cgdG8gZmlyc3Qgc2xpZGUuXG4gICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpICYmICFwYXJhbXMucmVzdW1lKSB7XG4gICAgICAgICRhcGkucmV2c2hvd3NsaWRlKDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzUGxheWluZykge1xuICAgICAgICAkYXBpLnJldnJlc3VtZSgpO1xuICAgICAgICBpc1BsYXlpbmcgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIGlmICgkYXBpICYmIGlzUGxheWluZykge1xuICAgICAgJGFwaS5yZXZwYXVzZSgpO1xuICAgICAgaXNQbGF5aW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVmcmVzaChmaWxlcykge1xuICAgIC8vIFN0YXJ0IHByZWxvYWRpbmcgaW1hZ2VzIHJpZ2h0IGF3YXkuXG4gICAgUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLnByZWxvYWRJbWFnZXMoZmlsZXMpO1xuICAgIG5ld0ZpbGVzID0gXy5jbG9uZShmaWxlcyk7XG4gICAgcmVmcmVzaFNsaWRlciA9IHRydWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0Q3VycmVudFNsaWRlXCI6IGdldEN1cnJlbnRTbGlkZSxcbiAgICBcImRlc3Ryb3lcIjogZGVzdHJveSxcbiAgICBcImluaXRcIjogaW5pdCxcbiAgICBcImlzUmVhZHlcIjogaXNSZWFkeSxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicmVmcmVzaFwiOiByZWZyZXNoXG4gIH07XG59O1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlID0gUmlzZVZpc2lvbi5JbWFnZSB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZS5TdG9yYWdlRmlsZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInJpc2Utc3RvcmFnZVwiKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgdXJsO1xuXG4gICAgICBpZiAoZS5kZXRhaWwgJiYgZS5kZXRhaWwudXJsKSB7XG5cbiAgICAgICAgdXJsID0gZS5kZXRhaWwudXJsLnJlcGxhY2UoXCInXCIsIFwiXFxcXCdcIik7XG5cbiAgICAgICAgaWYgKF9pbml0aWFsTG9hZCkge1xuICAgICAgICAgIF9pbml0aWFsTG9hZCA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVJbml0KHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gY2hlY2sgZm9yIFwiY2hhbmdlZFwiIHByb3BlcnR5XG4gICAgICAgICAgaWYgKGUuZGV0YWlsLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSkge1xuICAgICAgICAgICAgaWYgKGUuZGV0YWlsLmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVSZWZyZXNoKHVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgICAgICAgICAgaWYgKFJpc2VWaXNpb24uSW1hZ2UuaGFzU3RvcmFnZUVycm9yKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBwcm9jZWVkIHdpdGggcmVmcmVzaCBsb2dpYyBzbyB0aGUgV2lkZ2V0IGNhbiBldmVudHVhbGx5IHBsYXkgdmlkZW8gYWdhaW4gZnJvbSBhIG5ldHdvcmsgcmVjb3ZlcnlcbiAgICAgICAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZVJlZnJlc2goZS5kZXRhaWwudXJsKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWFwaS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2UgYXBpIGVycm9yXCIsXG4gICAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IFwiUmVzcG9uc2UgY29kZTogXCIgKyBlLmRldGFpbC5jb2RlICsgXCIsIG1lc3NhZ2U6IFwiICsgZS5kZXRhaWwubWVzc2FnZVxuICAgICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZpbGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2UgZmlsZSBub3QgZm91bmRcIixcbiAgICAgICAgXCJmaWxlX3VybFwiOiBlLmRldGFpbFxuICAgICAgfSxcbiAgICAgICAgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKTtcblxuICAgICAgLy8gY2xlYXIgdGhlIGV4aXN0aW5nIGltYWdlXG4gICAgICBpbWcuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGltYWdlIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1maWxlLXRocm90dGxlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBmaWxlIHRocm90dGxlZFwiLFxuICAgICAgICBcImZpbGVfdXJsXCI6IGUuZGV0YWlsXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBpbWFnZSBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWV4cGlyZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXhwaXJlZFwiXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlJpc2UgU3RvcmFnZSBzdWJzY3JpcHRpb24gaXMgbm90IGFjdGl2ZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGZpbGVVcmwgPSAoZS5kZXRhaWwgJiYgZS5kZXRhaWwucmVxdWVzdCAmJiBlLmRldGFpbC5yZXF1ZXN0LnVybCkgPyBlLmRldGFpbC5yZXF1ZXN0LnVybCA6IG51bGwsXG4gICAgICAgIHBhcmFtcyA9IHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJyaXNlIHN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgICBcImVycm9yX2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1cyxcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IGZpbGVVcmxcbiAgICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGZpbGVVcmwgPSAoZS5kZXRhaWwgJiYgZS5kZXRhaWwucmVxdWVzdCAmJiBlLmRldGFpbC5yZXF1ZXN0LnVybCkgPyBlLmRldGFpbC5yZXF1ZXN0LnVybCA6IG51bGwsXG4gICAgICAgIHBhcmFtcyA9IHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgXCJmaWxlX3VybFwiOiBmaWxlVXJsXG4gICAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcblxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSAwO1xuICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgIGlmKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2Upe1xuICAgICAgICBzdGF0dXNDb2RlID0gK2UuZGV0YWlsLmVycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG4gICAgICB9XG5cbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIHBhcmFtcy5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBwYXJhbXMuc3RvcmFnZS5maWxlTmFtZSk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgcGFyYW1zLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZvbGRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBfZmlsZXMgPSBbXSxcbiAgICBfdGltZXIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIHByb2Nlc3NVcmwoZSkge1xuICAgIHZhciBmaWxlO1xuXG4gICAgaWYgKGUuZGV0YWlsKSB7XG5cbiAgICAgIC8vIEltYWdlIGhhcyBiZWVuIGFkZGVkLlxuICAgICAgaWYgKGUuZGV0YWlsLmFkZGVkKSB7XG4gICAgICAgIF9maWxlcy5wdXNoKHtcbiAgICAgICAgICBcIm5hbWVcIjogZS5kZXRhaWwubmFtZSxcbiAgICAgICAgICBcInVybFwiOiBlLmRldGFpbC51cmxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEltYWdlIGhhcyBiZWVuIGNoYW5nZWQuXG4gICAgICBpZiAoZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgICBmaWxlID0gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lID09PSBlLmRldGFpbC5uYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICBmaWxlLnVybCA9IGUuZGV0YWlsLnVybDtcbiAgICAgIH1cblxuICAgICAgLy8gSW1hZ2UgaGFzIGJlZW4gZGVsZXRlZC5cbiAgICAgIGlmIChlLmRldGFpbC5kZWxldGVkKSB7XG4gICAgICAgIF9maWxlcyA9IF8ucmVqZWN0KF9maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGUuZGV0YWlsLm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9maWxlcyA9IF8uc29ydEJ5KF9maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgcmV0dXJuIGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoZSkge1xuICAgIHByb2Nlc3NVcmwoZSk7XG5cbiAgICAvLyBJbWFnZSBoYXMgYmVlbiBhZGRlZC5cbiAgICBpZiAoZS5kZXRhaWwuYWRkZWQpIHtcbiAgICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICAgIC8vIE5lZWQgdG8gd2FpdCBmb3IgYXQgbGVhc3QgMiBpbWFnZXMgdG8gbG9hZCBiZWZvcmUgaW5pdGlhbGl6aW5nIHRoZSBzbGlkZXIuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIHJldm9sdXRpb24uc2xpZGUub25jaGFuZ2UgZXZlbnQgd2lsbCBuZXZlciBmaXJlLCBhbmQgdGhpcyBldmVudCBpcyB1c2VkXG4gICAgICAgIC8vIHRvIGNoZWNrIHdoZXRoZXIgb3Igbm90IHRoZSBzbGlkZXIgc2hvdWxkIHJlZnJlc2guXG4gICAgICAgIGlmIChfZmlsZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIGNsZWFyVGltZW91dChfdGltZXIpO1xuICAgICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25GaWxlSW5pdChfZmlsZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBhIHRpbWVvdXQgaW4gY2FzZSB0aGVyZSBpcyBvbmx5IG9uZSBpbWFnZSBpbiB0aGUgZm9sZGVyLlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVJbml0KF9maWxlcyk7XG4gICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVW5jaGFuZ2VkXG4gICAgaWYgKGUuZGV0YWlsLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSAmJiAhZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgIGlmICghUmlzZVZpc2lvbi5JbWFnZS5oYXNTdG9yYWdlRXJyb3IoKSkge1xuICAgICAgICAvLyBvbmx5IHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIGJlbG93IGlmIHRoZXJlJ3MgYmVlbiBhIHN0b3JhZ2UgZXJyb3IsIG90aGVyd2lzZSBkbyBub3RoaW5nXG4gICAgICAgIC8vIHRoaXMgaXMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHNsaWRlc2hvdyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVSZWZyZXNoKF9maWxlcyk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwicmlzZS1zdG9yYWdlXCIpO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGhhbmRsZVJlc3BvbnNlKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1hcGktZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2UgYXBpIGVycm9yXCIsXG4gICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlJlc3BvbnNlIGNvZGU6IFwiICsgZS5kZXRhaWwuY29kZSArIFwiLCBtZXNzYWdlOiBcIiArIGUuZGV0YWlsLm1lc3NhZ2VcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZW1wdHktZm9sZGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJzdG9yYWdlIGZvbGRlciBlbXB0eVwiXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgY29udGFpbiBhbnkgaW1hZ2VzLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1mb2xkZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJzdG9yYWdlIGZvbGRlciBkb2Vzbid0IGV4aXN0XCIsXG4gICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBlLmRldGFpbFxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZvbGRlci1pbnZhbGlkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJzdG9yYWdlIGZvbGRlciBmb3JtYXQocykgaW52YWxpZFwiXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgY29udGFpbiBhbnkgc3VwcG9ydGVkIGltYWdlIGZvcm1hdHMuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1leHBpcmVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGV4cGlyZWRcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoXCJSaXNlIFN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGlzIG5vdCBhY3RpdmUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIHN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIiwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbC5lcnJvci5tZXNzYWdlXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG5cbiAgICAgIHZhciBzdGF0dXNDb2RlID0gMDtcbiAgICAgIC8vIFNob3cgYSBkaWZmZXJlbnQgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIDQwNCBjb21pbmcgZnJvbSByaXNlIGNhY2hlXG4gICAgICBpZihlLmRldGFpbC5lcnJvci5tZXNzYWdlKXtcbiAgICAgICAgc3RhdHVzQ29kZSA9ICtlLmRldGFpbC5lcnJvci5tZXNzYWdlLnN1YnN0cmluZyhlLmRldGFpbC5lcnJvci5tZXNzYWdlLmluZGV4T2YoXCI6XCIpKzIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLmdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVUeXBlXCIsIFwiaW1hZ2VcIik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uSW1hZ2UgPSBSaXNlVmlzaW9uLkltYWdlIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlLk5vblN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcmlzZUNhY2hlID0gUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlO1xuXG4gIHZhciBfcmVmcmVzaER1cmF0aW9uID0gMzAwMDAwLCAgLy8gNSBtaW51dGVzXG4gICAgX3JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcblxuICB2YXIgX2lzTG9hZGluZyA9IHRydWU7XG5cbiAgdmFyIF91cmwgPSBcIlwiO1xuXG4gIGZ1bmN0aW9uIF9nZXRGaWxlKG9taXRDYWNoZUJ1c3Rlcikge1xuICAgIHZhciBwYXJhbXM7XG5cbiAgICByaXNlQ2FjaGUuZ2V0RmlsZShfdXJsLCBmdW5jdGlvbiAocmVzcG9uc2UsIGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG5cbiAgICAgICAgaWYgKF9pc0xvYWRpbmcpIHtcbiAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZUluaXQocmVzcG9uc2UudXJsKTtcblxuICAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIGludGVydmFsXG4gICAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZVJlZnJlc2gocmVzcG9uc2UudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIC8vIGVycm9yIG9jY3VycmVkXG4gICAgICAgIHBhcmFtcyA9IHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJub24tc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIFwiZmlsZV91cmxcIjogcmVzcG9uc2UudXJsXG4gICAgICAgIH07XG5cbiAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuXG4gICAgICAgIHZhciBzdGF0dXNDb2RlID0gMDtcbiAgICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgICAgaWYoZXJyb3IubWVzc2FnZSl7XG4gICAgICAgICAgc3RhdHVzQ29kZSA9ICtlcnJvci5tZXNzYWdlLnN1YnN0cmluZyhlcnJvci5tZXNzYWdlLmluZGV4T2YoXCI6XCIpKzIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcy5nZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSk7XG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSwgb21pdENhY2hlQnVzdGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICBpZiAoX3JlZnJlc2hJbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICBfcmVmcmVzaEludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9nZXRGaWxlKGZhbHNlKTtcbiAgICAgIH0sIF9yZWZyZXNoRHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBIYW5kbGUgcHJlLW1lcmdlIHVzZSBvZiBcInVybFwiIHNldHRpbmcgcHJvcGVydHlcbiAgICBfdXJsID0gKGRhdGEudXJsICYmIGRhdGEudXJsICE9PSBcIlwiKSA/IGRhdGEudXJsIDogZGF0YS5zZWxlY3Rvci51cmw7XG5cbiAgICBfZ2V0RmlsZSh0cnVlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FjdGl2ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIHRyeSB7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG1haW5Db250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNhbid0IGluaXRpYWxpemUgTWVzc2FnZSAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoX2FjdGl2ZSkge1xuICAgICAgLy8gY2xlYXIgY29udGVudCBvZiBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgd2hpbGUgKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cobWVzc2FnZSkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHA7XG5cbiAgICBpZiAoIV9hY3RpdmUpIHtcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBfaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgXCJoaWRlXCI6IGhpZGUsXG4gICAgXCJzaG93XCI6IHNob3dcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBSaXNlVmlzaW9uLCBnYWRnZXRzICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGlkID0gbmV3IGdhZGdldHMuUHJlZnMoKS5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25maWd1cmUobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciBhZGRpdGlvbmFsUGFyYW1zLCBtb2RlLFxuICAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgIGRpc3BsYXlJZCA9IFwiXCI7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGNvbXBhbnkgaWRcbiAgICAgIGlmIChuYW1lc1swXSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICB9XG5cbiAgICAgIC8vIGRpc3BsYXkgaWRcbiAgICAgIGlmIChuYW1lc1sxXSA9PT0gXCJkaXNwbGF5SWRcIikge1xuICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gdmFsdWVzWzFdO1xuICAgICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgICBkaXNwbGF5SWQgPSBcInByZXZpZXdcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBwcm92aWRlIExvZ2dlclV0aWxzIHRoZSBpZHMgdG8gdXNlXG4gICAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5zZXRJZHMoY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuXG4gICAgICAvLyBhZGRpdGlvbmFsIHBhcmFtc1xuICAgICAgaWYgKG5hbWVzWzJdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMl0pO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIC8vIHN0b3JhZ2UgZmlsZSBvciBmb2xkZXIgc2VsZWN0ZWRcbiAgICAgICAgICBpZiAoIWFkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgLy8gZm9sZGVyIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZm9sZGVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtb2RlID0gXCJmaWxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vbi1zdG9yYWdlIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zZXRBZGRpdGlvbmFsUGFyYW1zKGFkZGl0aW9uYWxQYXJhbXMsIG1vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2UucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgUmlzZVZpc2lvbi5JbWFnZS5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2Uuc3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9seW1lclJlYWR5KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJjb21wYW55SWRcIiwgXCJkaXNwbGF5SWRcIiwgXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG59KSh3aW5kb3csIGRvY3VtZW50LCBnYWRnZXRzKTtcblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0zJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
