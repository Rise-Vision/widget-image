var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(e){"use strict";function t(e,t){Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(d=t[0]),"displayId"===e[1]&&(u=t[1]?t[1]:"preview"),c(d,u))}function n(e,t){var n=null;e.event?(n=e,n.file_url&&(n.file_format=o(n.file_url)),i(function(e,i){n.company_id=e,n.display_id=i,t(n)})):t(n)}function i(n){n&&"function"==typeof n&&(c=n,d&&u?c(d,u):l&&""!==l&&(e.rpc.register("rsparam_set_"+l,t),e.rpc.call("","rsparam_get",null,l,["companyId","displayId"])))}function o(e){var t,n=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),n.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function r(e){var t=JSON.parse(JSON.stringify(g));return t.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),t.rows[0].json=JSON.parse(JSON.stringify(e)),t.rows[0].json.ts=(new Date).toISOString(),t}function s(e){var t=new Date,n=t.getUTCFullYear(),i=t.getUTCMonth()+1,o=t.getUTCDate();return 10>i&&(i="0"+i),10>o&&(o="0"+o),e+n+i+o}function a(e,t){n(t,function(t){null!==t&&RiseVision.Common.Logger.log(e,t)})}var l=(new e.Prefs).getString("id"),u="",d="",c=null,g={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:""}]};return{getIds:i,getInsertData:r,getFileFormat:o,getTable:s,logEvent:a}}(gadgets),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-u<358e4?e({}):(t.open("POST",o,!0),t.onloadend=function(){var n=JSON.parse(t.response);e({token:n.access_token,refreshedAt:new Date})},t.send(),void 0)}function n(e){return s&&l===e}function i(i,o){function c(t){var n,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",e.getTable(i)),u=t.refreshedAt||u,d=t.token||d,n=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+d),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(n))}if(!(!i||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&n(o.event)))return s=!0,l=o.event,setTimeout(function(){s=!1},a),t(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",u=0,d="";return{log:i}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var t=new XMLHttpRequest;e&&"function"==typeof e&&(t.open("GET",n+"ping?callback=_",!0),t.onreadystatechange=function(){try{4===t.readyState&&(i=!0,200===t.status?(o=!0,e(!0,t.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(n){console.debug("Caught exception: ",n.description)}},t.send())}function t(e,t,r){function s(t){var i,o,s;t?i=r?n+"?url="+encodeURIComponent(e):n+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?i=e:(o=e.split("?"),s=1===o.length?"?":"&",i=e+s+"cb="+(new Date).getTime()),a("HEAD",i)}function a(e,n){var i=new XMLHttpRequest,r={xhr:i,url:n};i.open(e,n,!0),i.addEventListener("loadend",function(){var s=i.status||0;s>=200&&300>s?t(r):"HEAD"===e?a("GET",n):o?t(r,new Error("The request failed with status code: "+s)):t(r)}),i.send()}if(e&&t&&"function"==typeof t)return i?s(o):this.ping(s)}var n="http://localhost:9494/",i=!1,o=!1;return{getFile:t,ping:e}}();var RiseVision=RiseVision||{};if(RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family:"+t.font.family+"; ",i="color: "+t.color+"; ",o="font-size: "+t.size+"px; ",r="font-weight: "+(t.bold?"bold":"normal")+"; ",s="font-style: "+(t.italic?"italic":"normal")+"; ",a="text-decoration: "+(t.underline?"underline":"none")+"; ",l="background-color: "+t.highlightColor+"; ";return"."+e+" {"+n+i+o+r+s+a+l+"}"}function t(e){for(var t=document.createElement("style"),n=0,i=e.length;i>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,r){n.forEach(function(n){n.class&&n.fontSetting&&t([e(n.class,n.fontSetting)]),n.fontSetting.font.type&&("custom"===n.fontSetting.font.type&&n.fontSetting.font.family&&n.fontSetting.font.url?i(n.fontSetting.font.family,n.fontSetting.font.url,r):"google"===n.fontSetting.font.type&&n.fontSetting.font.family&&o(n.fontSetting.font.family,r))})}function i(e,t,n){var i=null,o="font-family: "+e+"; src: url('"+t+"');";n=n||document,i=n.styleSheets[0],null!==i&&i.addRule("@font-face",o)}function o(e,t){var n=document.createElement("link");t=t||document,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://fonts.googleapis.com/css?family="+e),null!==n&&t.getElementsByTagName("head")[0].appendChild(n)}function r(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i]=new Image,n[i].src=e[i]}function s(e){for(var t,n=window.location.search.substring(1),i=n.split("&"),o=0;o<i.length;o++)if(t=i[o].split("="),t[0]==e)return decodeURIComponent(t[1]);return""}return{getQueryParameter:s,getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:i,loadGoogleFont:o,preloadImages:r}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),"undefined"==typeof config)var config={STORAGE_ENV:"prod"};var RiseVision=RiseVision||{};RiseVision.Image={},RiseVision.Image=function(e){"use strict";function t(){e.rpc.call("","rsevent_ready",null,E.getString("id"),!0,!0,!0,!0,!0)}function n(){e.rpc.call("","rsevent_done",null,E.getString("id")),null!==O&&u(O,!0),u({event:"done",file_url:r()},!1)}function i(){clearTimeout(A),A=null}function o(){i(),A=setTimeout(function(){n()},5e3)}function r(){var e=-1;if(S&&S.length>0){if("file"===I)return S[0];if("folder"===I&&T&&T.isReady()&&(e=T.getCurrentSlide(),-1!==e))return S[e]}return null}function s(){var e,n=document.getElementById("container"),i=document.createDocumentFragment(),o=document.createElement("div"),r=null;b=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),b.show("Please wait while your image is downloaded."),V.background&&Object.keys(V.background).length>0&&(document.body.style.background=V.background.color),"file"===I?(o.setAttribute("id","image"),o.className=V.position,o.className=V.scaleToFit?o.className+" scale-to-fit":o.className,i.appendChild(o),n.appendChild(i),e=0!==Object.keys(V.storage).length,e?(r="storage file",w=new RiseVision.Image.StorageFile(V),w.init()):(r="custom",C=new RiseVision.Image.NonStorage(V),C.init())):"folder"===I&&(o.className="tp-banner-container",i.appendChild(o),n.appendChild(i),r="storage folder",w=new RiseVision.Image.StorageFolder(V),w.init()),RiseVision.Common.LoggerUtils.logEvent(v(),{event:"configuration",event_details:r}),t()}function a(e){var t=document.querySelector("#container #image");t.style.backgroundImage="url("+e+")"}function l(){return k}function u(e,t){t&&(O=e),RiseVision.Common.LoggerUtils.logEvent(v(),e)}function d(e){"file"===I?(S[0]=e,b.hide(),a(S[0])):"folder"===I&&(S=e,T=new RiseVision.Image.Slider(V),T.init(e))}function c(e){"file"===I?(S[0]=e,a(S[0])):"folder"===I&&(S=e,T.refresh(S)),L=!1,k=!1,O=null}function g(e,t){V=_.clone(e),I=t,V.width=E.getInt("rsW"),V.height=E.getInt("rsH"),document.getElementById("container").style.height=E.getInt("rsH")+"px",s()}function f(){b.hide(),N||T.play()}function m(){n()}function p(){N=!0,i(),"folder"===I&&T&&T.isReady()&&T.pause()}function h(){return N=!1,u({event:"play",file_url:r()},!1),L?(o(),void 0):("folder"===I&&T&&T.isReady()&&T.play(),void 0)}function v(){return"image_events"}function R(e,t){L=!0,k="undefined"!=typeof t,b.show(e),"folder"===I&&T&&T.isReady()&&T.destroy(),N||o()}function y(){p()}var I,E=new e.Prefs,b=null,V=null,w=null,C=null,T=null,S=[],O=null,A=null,L=!1,N=!0,k=!1;return{hasStorageError:l,logEvent:u,onFileInit:d,onFileRefresh:c,onSliderComplete:m,onSliderReady:f,pause:p,play:h,setAdditionalParams:g,getTableName:v,showError:R,stop:y}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.Slider=function(e){"use strict";function t(){var t=document.querySelector(".tp-banner ul"),n=document.createDocumentFragment(),i=[],o=null,r=null,s="";f=p.length,p.forEach(function(t){switch(o=document.createElement("li"),r=document.createElement("img"),o.setAttribute("data-transition","fade"),o.setAttribute("data-masterspeed",500),o.setAttribute("data-delay",1e3*e.duration),r.src=t.url,e.position){case"top-left":s="left top";break;case"top-center":s="center top";break;case"top-right":s="right top";break;case"middle-left":s="left center";break;case"middle-center":s="center center";break;case"middle-right":s="right center";break;case"bottom-left":s="left bottom";break;case"bottom-center":s="center bottom";break;case"bottom-right":s="right bottom";break;default:s="left top"}r.setAttribute("data-bgposition",s),e.scaleToFit?r.setAttribute("data-bgfit","contain"):r.setAttribute("data-bgfit","normal"),o.appendChild(r),i.push(o)}),i.forEach(function(e){n.appendChild(e)}),t.appendChild(n)}function n(e){b?m.revpause():y&&(y=!1,m.revpause(),RiseVision.Image.onSliderComplete(),I&&(m&&(i(),l(h)),I=!1)),e.slideIndex===f&&(y=!0)}function i(){$("body").off("touchend"),m.off("revolution.slide.onloaded"),m.off("revolution.slide.onchange"),m.revkill(),m=null}function o(){b=!0,clearTimeout(R),R=setTimeout(function(){b=!1,m.revnext(),m.revresume()},1e3*e.pause),r()}function r(){e.autoHide&&(clearTimeout(v),v=setTimeout(function(){$(".tp-leftarrow, .tp-rightarrow").addClass("hidearrows")},V))}function s(){m&&(y=!1,m.revpause(),i())}function a(){return m&&p&&p.length>0?m.revcurrentslide():-1}function l(i){var s=document.querySelector(".tp-banner-container"),a=document.createDocumentFragment(),l=document.createElement("div"),u=document.createElement("ul");l.setAttribute("class","tp-banner"),l.appendChild(u),a.appendChild(l),s.appendChild(a),p=_.clone(i),t(),E=!0,m=$(".tp-banner").revolution({hideThumbs:0,hideTimerBar:"on",navigationType:"none",onHoverStop:"off",startwidth:e.width,startheight:e.height}),m.on("revolution.slide.onloaded",function(){m.revpause(),E=!1,RiseVision.Image.onSliderReady()}),m.on("revolution.slide.onchange",function(e,t){n(t)}),$("body").on("touchend",".tp-banner",function(){o(),$(".tp-leftarrow, .tp-rightarrow").removeClass("hidearrows")}),$("body").on("touchend",".tp-leftarrow, .tp-rightarrow",function(){o()}),r()}function u(){return!E}function d(){m&&m.revresume()}function c(){m&&m.revpause()}function g(e){RiseVision.Common.Utilities.preloadImages(e),h=_.clone(e),I=!0}var f=0,m=null,p=null,h=null,v=null,R=null,y=!1,I=!1,E=!0,b=!1,V=3e3;return{getCurrentSlide:a,destroy:s,init:l,isReady:u,play:d,pause:c,refresh:g}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.StorageFile=function(e){"use strict";function t(){var t=document.querySelector("rise-storage");t.addEventListener("rise-storage-response",function(e){var t;e.detail&&e.detail.url&&(t=e.detail.url.replace("'","\\'"),n?(n=!1,RiseVision.Image.onFileInit(t)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Image.onFileRefresh(t):RiseVision.Image.hasStorageError()&&RiseVision.Image.onFileRefresh(e.detail.url)))}),t.addEventListener("rise-storage-no-file",function(e){var t={event:"error",event_details:"storage file not found",file_url:e.detail},n=document.getElementById("image");n.style.background="",RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("The selected image does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-file-throttled",function(e){var t={event:"error",event_details:"storage file throttled",file_url:e.detail};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("The selected image is temporarily unavailable.")}),t.addEventListener("rise-storage-error",function(e){var t=e.detail&&e.detail.request&&e.detail.request.url?e.detail.request.url:null,n={event:"error",event_details:"rise storage error",error_details:"The request failed with status code: "+e.detail.error.currentTarget.status,file_url:t};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var t=e.detail&&e.detail.request&&e.detail.request.url?e.detail.request.url:null,n={event:"error",event_details:"rise cache error",error_details:"The request failed with status code: "+e.detail.error.currentTarget.status,file_url:t};RiseVision.Image.logEvent(n,!0),RiseVision.Image.showError("There was a problem retrieving the file from Rise Cache.")}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go()}var n=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.StorageFolder=function(e){"use strict";function t(e){var t;e.detail&&(e.detail.added&&r.push({name:e.detail.name,url:e.detail.url}),e.detail.changed&&(t=_.find(r,function(t){return t.name===e.detail.name}),t.url=e.detail.url),e.detail.deleted&&(r=_.reject(r,function(t){return t.name===e.detail.name}))),r=_.sortBy(r,function(e){return e.name.toLowerCase()})}function n(e){return t(e),e.detail.added&&o?(r.length>1?(o=!1,clearTimeout(s),RiseVision.Image.onFileInit(r)):s=setTimeout(function(){o=!1,RiseVision.Image.onFileInit(r)},5e3),void 0):((!e.detail.hasOwnProperty("changed")||e.detail.changed||RiseVision.Image.hasStorageError())&&RiseVision.Image.onFileRefresh(r),void 0)}function i(){var t=document.querySelector("rise-storage");t.addEventListener("rise-storage-response",n),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"error",event_details:"storage folder empty"};RiseVision.Image.logEvent(e,!0),RiseVision.Image.showError("The selected folder does not contain any images.")}),t.addEventListener("rise-storage-no-folder",function(e){var t={event:"error",event_details:"storage folder doesn't exist",error_details:e.detail};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("The selected folder does not exist.")}),t.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("There was a problem retrieving the file from Rise Cache.")}),t.setAttribute("fileType","image"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go()}var o=!0,r=[],s=null;return{init:i}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.NonStorage=function(e){"use strict";function t(e){var t;o.getFile(l,function(e,i){i?(t={event:"error",event_details:"non-storage error",error_details:i.message,file_url:e.url},RiseVision.Image.logEvent(t,!0),RiseVision.Image.showError("There was a problem retrieving the file from Rise Cache.")):a?(a=!1,RiseVision.Image.onFileInit(e.url),n()):RiseVision.Image.onFileRefresh(e.url)},e)}function n(){null===s&&(s=setInterval(function(){t(!1)},r))}function i(){l=e.url&&""!==e.url?e.url:e.selector.url,t(!0)}var o=RiseVision.Common.RiseCache,r=3e5,s=null,a=!0,l="";return{init:i}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function n(){try{t.style.height=e.style.height}catch(n){console.warn("Can't initialize Message - ",n.message)}}function i(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function o(n){var i,o=document.createDocumentFragment();r?(i=t.querySelector(".message"),i.innerHTML=n):(e.style.visibility="hidden",t.style.display="block",i=document.createElement("p"),i.innerHTML=n,i.setAttribute("class","message"),o.appendChild(i),t.appendChild(o),r=!0)}var r=!1;return n(),{hide:i,show:o}},function(e,t,n){"use strict";function i(e,t){var n,i;Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&(n=JSON.parse(t[0]),i=0!==Object.keys(n.storage).length?n.storage.fileName?"file":"folder":"file",RiseVision.Image.setAdditionalParams(n,i))}function o(){RiseVision.Image.pause()}function r(){RiseVision.Image.play()}function s(){RiseVision.Image.stop()}function a(){e.removeEventListener("WebComponentsReady",a),l&&""!==l&&(n.rpc.register("rscmd_play_"+l,r),n.rpc.register("rscmd_pause_"+l,o),n.rpc.register("rscmd_stop_"+l,s),n.rpc.register("rsparam_set_"+l,i),n.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var l=(new n.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},e.addEventListener("WebComponentsReady",a)}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdhZGdldHMiLCJzZXRJZHMiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhbnlJZCIsImRpc3BsYXlJZCIsImNhbGxiYWNrIiwiZ2V0RXZlbnRQYXJhbXMiLCJwYXJhbXMiLCJjYiIsImpzb24iLCJldmVudCIsImZpbGVfdXJsIiwiZmlsZV9mb3JtYXQiLCJnZXRGaWxlRm9ybWF0IiwiZ2V0SWRzIiwiY29tcGFueV9pZCIsImRpc3BsYXlfaWQiLCJpZCIsInJwYyIsInJlZ2lzdGVyIiwiY2FsbCIsInVybCIsInN0ciIsImhhc1BhcmFtcyIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwidGVzdCIsImluZGV4T2YiLCJ0b0xvd2VyQ2FzZSIsImdldEluc2VydERhdGEiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiQkFTRV9JTlNFUlRfU0NIRU1BIiwicm93cyIsImluc2VydElkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ0cyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImdldFRhYmxlIiwibmFtZSIsImRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsImdldFVUQ01vbnRoIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsImxvZ0V2ZW50IiwidGFibGUiLCJMb2dnZXIiLCJsb2ciLCJQcmVmcyIsImdldFN0cmluZyIsImtpbmQiLCJza2lwSW52YWxpZFJvd3MiLCJpZ25vcmVVbmtub3duVmFsdWVzIiwidXRpbHMiLCJyZWZyZXNoVG9rZW4iLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInJlZnJlc2hEYXRlIiwib3BlbiIsIlJFRlJFU0hfVVJMIiwib25sb2FkZW5kIiwicmVzcCIsInJlc3BvbnNlIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoZWRBdCIsInNlbmQiLCJpc1Rocm90dGxlZCIsInRocm90dGxlIiwibGFzdEV2ZW50IiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInJlcGxhY2UiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiaGFzT3duUHJvcGVydHkiLCJzZXRUaW1lb3V0IiwidGhyb3R0bGVEZWxheSIsIlJpc2VDYWNoZSIsInBpbmciLCJyIiwiQkFTRV9DQUNIRV9VUkwiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiX3BpbmdSZWNlaXZlZCIsInN0YXR1cyIsIl9pc0NhY2hlUnVubmluZyIsInJlc3BvbnNlVGV4dCIsImNvbnNvbGUiLCJkZWJ1ZyIsImUiLCJkZXNjcmlwdGlvbiIsImdldEZpbGUiLCJmaWxlVXJsIiwibm9jYWNoZWJ1c3RlciIsImZpbGVSZXF1ZXN0IiwiaXNDYWNoZVJ1bm5pbmciLCJzZXBhcmF0b3IiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXRUaW1lIiwic3BsaXQiLCJtYWtlUmVxdWVzdCIsIm1ldGhvZCIsInJlcXVlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiRXJyb3IiLCJ0aGlzIiwiVXRpbGl0aWVzIiwiZ2V0Rm9udENzc1N0eWxlIiwiY2xhc3NOYW1lIiwiZm9udE9iaiIsImZhbWlseSIsImZvbnQiLCJjb2xvciIsInNpemUiLCJ3ZWlnaHQiLCJib2xkIiwiaXRhbGljIiwidW5kZXJsaW5lIiwiaGlnaGxpZ2h0IiwiaGlnaGxpZ2h0Q29sb3IiLCJhZGRDU1NSdWxlcyIsInJ1bGVzIiwic3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImhlYWQiLCJsb2FkRm9udHMiLCJzZXR0aW5ncyIsImNvbnRlbnREb2MiLCJmb3JFYWNoIiwiaXRlbSIsImNsYXNzIiwiZm9udFNldHRpbmciLCJ0eXBlIiwibG9hZEN1c3RvbUZvbnQiLCJsb2FkR29vZ2xlRm9udCIsInNoZWV0IiwicnVsZSIsInN0eWxlU2hlZXRzIiwiYWRkUnVsZSIsInN0eWxlc2hlZXQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInByZWxvYWRJbWFnZXMiLCJ1cmxzIiwiaW1hZ2VzIiwiSW1hZ2UiLCJzcmMiLCJnZXRRdWVyeVBhcmFtZXRlciIsInBhcmFtIiwicGFpciIsInF1ZXJ5Iiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdWJzdHJpbmciLCJ2YXJzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiX3JlYWR5IiwiX3ByZWZzIiwiX2RvbmUiLCJfZXJyb3JMb2ciLCJfZ2V0Q3VycmVudEZpbGUiLCJfY2xlYXJFcnJvclRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiX2Vycm9yVGltZXIiLCJfc3RhcnRFcnJvclRpbWVyIiwic2xpZGVOdW0iLCJfY3VycmVudEZpbGVzIiwiX21vZGUiLCJfc2xpZGVyIiwiaXNSZWFkeSIsImdldEN1cnJlbnRTbGlkZSIsImluaXQiLCJpc1N0b3JhZ2VGaWxlIiwiY29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJlbCIsImRldGFpbHMiLCJfbWVzc2FnZSIsIk1lc3NhZ2UiLCJzaG93IiwiX3BhcmFtcyIsImJhY2tncm91bmQiLCJPYmplY3QiLCJrZXlzIiwiYm9keSIsInBvc2l0aW9uIiwic2NhbGVUb0ZpdCIsInN0b3JhZ2UiLCJfc3RvcmFnZSIsIlN0b3JhZ2VGaWxlIiwiX25vblN0b3JhZ2UiLCJOb25TdG9yYWdlIiwiU3RvcmFnZUZvbGRlciIsImdldFRhYmxlTmFtZSIsImV2ZW50X2RldGFpbHMiLCJzZXRTaW5nbGVJbWFnZSIsImltYWdlIiwicXVlcnlTZWxlY3RvciIsImJhY2tncm91bmRJbWFnZSIsImhhc1N0b3JhZ2VFcnJvciIsIl9zdG9yYWdlRXJyb3JGbGFnIiwiaXNFcnJvciIsIm9uRmlsZUluaXQiLCJoaWRlIiwiU2xpZGVyIiwib25GaWxlUmVmcmVzaCIsInJlZnJlc2giLCJfZXJyb3JGbGFnIiwic2V0QWRkaXRpb25hbFBhcmFtcyIsImFkZGl0aW9uYWxQYXJhbXMiLCJtb2RlVHlwZSIsIl8iLCJjbG9uZSIsIndpZHRoIiwiZ2V0SW50IiwiaGVpZ2h0Iiwib25TbGlkZXJSZWFkeSIsIl92aWV3ZXJQYXVzZWQiLCJwbGF5Iiwib25TbGlkZXJDb21wbGV0ZSIsInBhdXNlIiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImlzU3RvcmFnZUVycm9yIiwiZGVzdHJveSIsInN0b3AiLCJhZGRTbGlkZXMiLCJsaXN0Iiwic2xpZGVzIiwic2xpZGUiLCJ0b3RhbFNsaWRlcyIsImN1cnJlbnRGaWxlcyIsImZpbGUiLCJkdXJhdGlvbiIsInB1c2giLCJvblNsaWRlQ2hhbmdlZCIsImlzUGF1c2VkIiwiJGFwaSIsInJldnBhdXNlIiwiaXNMYXN0U2xpZGUiLCJyZWZyZXNoU2xpZGVyIiwiZGVzdHJveVNsaWRlciIsIm5ld0ZpbGVzIiwic2xpZGVJbmRleCIsIiQiLCJvZmYiLCJyZXZraWxsIiwiaGFuZGxlVXNlckFjdGl2aXR5Iiwic2xpZGVUaW1lciIsInJldm5leHQiLCJyZXZyZXN1bWUiLCJoaWRlTmF2IiwiYXV0b0hpZGUiLCJuYXZUaW1lciIsImFkZENsYXNzIiwibmF2VGltZW91dCIsInJldmN1cnJlbnRzbGlkZSIsImZpbGVzIiwidHBCYW5uZXJDb250YWluZXIiLCJ0cEJhbm5lciIsInVsIiwiaXNMb2FkaW5nIiwicmV2b2x1dGlvbiIsImhpZGVUaHVtYnMiLCJoaWRlVGltZXJCYXIiLCJuYXZpZ2F0aW9uVHlwZSIsIm9uSG92ZXJTdG9wIiwic3RhcnR3aWR0aCIsInN0YXJ0aGVpZ2h0Iiwib24iLCJyZW1vdmVDbGFzcyIsImRldGFpbCIsIl9pbml0aWFsTG9hZCIsImNoYW5nZWQiLCJpbWciLCJlcnJvcl9kZXRhaWxzIiwiZXJyb3IiLCJjdXJyZW50VGFyZ2V0IiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJnbyIsInByb2Nlc3NVcmwiLCJhZGRlZCIsIl9maWxlcyIsImZpbmQiLCJkZWxldGVkIiwicmVqZWN0Iiwic29ydEJ5IiwiaGFuZGxlUmVzcG9uc2UiLCJfaXNMb2FkaW5nIiwiX3RpbWVyIiwiX2dldEZpbGUiLCJvbWl0Q2FjaGVCdXN0ZXIiLCJyaXNlQ2FjaGUiLCJfdXJsIiwiX3N0YXJ0UmVmcmVzaEludGVydmFsIiwiX3JlZnJlc2hJbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfcmVmcmVzaER1cmF0aW9uIiwic2VsZWN0b3IiLCJtYWluQ29udGFpbmVyIiwibWVzc2FnZUNvbnRhaW5lciIsIl9pbml0Iiwid2FybiIsIl9hY3RpdmUiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkaXNwbGF5IiwidmlzaWJpbGl0eSIsInAiLCJpbm5lckhUTUwiLCJjb25maWd1cmUiLCJtb2RlIiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uY29udGV4dG1lbnUiLCJvbm1vdXNlZG93biIsIl9nYXEiLCJnYSIsImFzeW5jIiwicHJvdG9jb2wiLCJzIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsdUJBQ0ZDLGNBQWUsaUJBQ2ZDLGlCQUFrQiw0RUFDbEJDLHFCQUFzQiwyQkFDdEJDLHFCQUFzQixxRUFDdEJDLFlBQWEsT0FDYkMsVUFBVyw2Q0FJVEMsV0FBYUEsY0FDakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPQyxZQUFjLFNBQVVDLEdBQ3hDLFlBc0JBLFNBQVNDLEdBQU9DLEVBQU9DLEdBQ2pCQyxNQUFNQyxRQUFRSCxJ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U0FBUytLLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUlqTixTQUFTc0IscUJBQXFCLFVBQVUsRUFBSTJMLEdBQUVDLFdBQVdDLGFBQWFMLEVBQUlHIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgV0lER0VUX0NPTU1PTl9DT05GSUcgPSB7XG4gIEFVVEhfUEFUSF9VUkw6IFwidjEvd2lkZ2V0L2F1dGhcIixcbiAgTE9HR0VSX0NMSUVOVF9JRDogXCIxMDg4NTI3MTQ3MTA5LTZxMW8ydnRpaG4zNDI5MnBqdDRja2htaGNrMHJrMG83LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXG4gIExPR0dFUl9DTElFTlRfU0VDUkVUOiBcIm5sWnlyY1BMZzZvRXdPOWY5V2ZuMjlXaFwiLFxuICBMT0dHRVJfUkVGUkVTSF9UT0tFTjogXCIxL3h6dDRrd3pFMUg3VzlWbktCOGNBYUN4NnpiNEVzNG5LRW9xYVlIZFREMTVJZ09ySkR0ZHVuNnpLNlhpQVRDS1RcIixcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzID0gKGZ1bmN0aW9uKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgZGlzcGxheUlkID0gXCJcIixcbiAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgIGNhbGxiYWNrID0gbnVsbDtcblxuICB2YXIgQkFTRV9JTlNFUlRfU0NIRU1BID1cbiAge1xuICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICBcInNraXBJbnZhbGlkUm93c1wiOiBmYWxzZSxcbiAgICBcImlnbm9yZVVua25vd25WYWx1ZXNcIjogZmFsc2UsXG4gICAgXCJyb3dzXCI6IFt7XG4gICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICB9XVxuICB9O1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogU2V0IHRoZSBDb21wYW55IGFuZCBEaXNwbGF5IElEcy4gKi9cbiAgZnVuY3Rpb24gc2V0SWRzKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAobmFtZXNbMF0gPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZXNbMV0gPT09IFwiZGlzcGxheUlkXCIpIHtcbiAgICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIFJldHJpZXZlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLiAqL1xuICBmdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGNiKSB7XG4gICAgdmFyIGpzb24gPSBudWxsO1xuXG4gICAgLy8gZXZlbnQgaXMgcmVxdWlyZWQuXG4gICAgaWYgKHBhcmFtcy5ldmVudCkge1xuICAgICAganNvbiA9IHBhcmFtcztcblxuICAgICAgaWYgKGpzb24uZmlsZV91cmwpIHtcbiAgICAgICAganNvbi5maWxlX2Zvcm1hdCA9IGdldEZpbGVGb3JtYXQoanNvbi5maWxlX3VybCk7XG4gICAgICB9XG5cbiAgICAgIGdldElkcyhmdW5jdGlvbihjb21wYW55SWQsIGRpc3BsYXlJZCkge1xuICAgICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICAgIGpzb24uZGlzcGxheV9pZCA9IGRpc3BsYXlJZDtcblxuICAgICAgICBjYihqc29uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SWRzKGNiKSB7XG4gICAgaWYgKCFjYiB8fCB0eXBlb2YgY2IgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNhbGxiYWNrID0gY2I7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhbnlJZCAmJiBkaXNwbGF5SWQpIHtcbiAgICAgIGNhbGxiYWNrKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBzZXRJZHMpO1xuICAgICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImNvbXBhbnlJZFwiLCBcImRpc3BsYXlJZFwiXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEJBU0VfSU5TRVJUX1NDSEVNQSkpO1xuXG4gICAgZGF0YS5yb3dzWzBdLmluc2VydElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLnRvVXBwZXJDYXNlKCk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGRhdGEucm93c1swXS5qc29uLnRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZShuYW1lKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lICsgeWVhciArIG1vbnRoICsgZGF5O1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SWRzXCI6IGdldElkcyxcbiAgICBcImdldEluc2VydERhdGFcIjogZ2V0SW5zZXJ0RGF0YSxcbiAgICBcImdldEZpbGVGb3JtYXRcIjogZ2V0RmlsZUZvcm1hdCxcbiAgICBcImdldFRhYmxlXCI6IGdldFRhYmxlLFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnRcbiAgfTtcbn0pKGdhZGdldHMpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHV0aWxzLmdldFRhYmxlKHRhYmxlTmFtZSkpO1xuICAgICAgcmVmcmVzaERhdGUgPSByZWZyZXNoRGF0YS5yZWZyZXNoZWRBdCB8fCByZWZyZXNoRGF0ZTtcbiAgICAgIHRva2VuID0gcmVmcmVzaERhdGEudG9rZW4gfHwgdG9rZW47XG4gICAgICBpbnNlcnREYXRhID0gdXRpbHMuZ2V0SW5zZXJ0RGF0YShwYXJhbXMpO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGRhdGEuXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHRva2VuKTtcblxuICAgICAgaWYgKHBhcmFtcy5jYiAmJiB0eXBlb2YgcGFyYW1zLmNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBhcmFtcy5jYih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShpbnNlcnREYXRhKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZnJlc2hUb2tlbihpbnNlcnRXaXRoVG9rZW4pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ1wiOiBsb2dcbiAgfTtcbn0pKFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzKTtcbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZSA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBCQVNFX0NBQ0hFX1VSTCA9IFwiaHR0cDovL2xvY2FsaG9zdDo5NDk0L1wiO1xuXG4gIHZhciBfcGluZ1JlY2VpdmVkID0gZmFsc2UsXG4gICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gcGluZyhjYWxsYmFjaykge1xuICAgIHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgci5vcGVuKFwiR0VUXCIsIEJBU0VfQ0FDSEVfVVJMICsgXCJwaW5nP2NhbGxiYWNrPV9cIiwgdHJ1ZSk7XG4gICAgci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgIC8vIHNhdmUgdGhpcyByZXN1bHQgZm9yIHVzZSBpbiBnZXRGaWxlKClcbiAgICAgICAgICBfcGluZ1JlY2VpdmVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmKHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZ1wiKTtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiQ2F1Z2h0IGV4Y2VwdGlvbjogXCIsIGUuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgfTtcbiAgICByLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGUoZmlsZVVybCwgY2FsbGJhY2ssIG5vY2FjaGVidXN0ZXIpIHtcbiAgICBpZiAoIWZpbGVVcmwgfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgIHZhciB1cmwsIHN0ciwgc2VwYXJhdG9yO1xuXG4gICAgICBpZiAoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIHVybCB3aXRoIGNhY2hlYnVzdGVyIG9yIG5vdFxuICAgICAgICB1cmwgPSAobm9jYWNoZWJ1c3RlcikgPyBCQVNFX0NBQ0hFX1VSTCArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKSA6XG4gICAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgIGlmIChzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNlcnZlciBtYXkgbm90IHN1cHBvcnQgSEVBRCByZXF1ZXN0LiBGYWxsYmFjayB0byBhIEdFVCByZXF1ZXN0LlxuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QsIG5ldyBFcnJvcihcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIHN0YXR1cykpO1xuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRvIGF2b2lkIHRocm93aW5nIGFuIGVycm9yIHdoZW4gdGhlcmUgaXMgYSBjcm9zcyBkb21haW4gaXNzdWVcbiAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG5cbiAgICBpZiAoIV9waW5nUmVjZWl2ZWQpIHtcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHJldHVybiB0aGlzLnBpbmcoZmlsZVJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsZVJlcXVlc3QoX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBwaW5nOiBwaW5nXG4gIH07XG5cbn0pKCk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzID0gKGZ1bmN0aW9uKCkge1xuXG4gIGZ1bmN0aW9uIGdldEZvbnRDc3NTdHlsZShjbGFzc05hbWUsIGZvbnRPYmopIHtcbiAgICB2YXIgZmFtaWx5ID0gXCJmb250LWZhbWlseTpcIiArIGZvbnRPYmouZm9udC5mYW1pbHkgKyBcIjsgXCI7XG4gICAgdmFyIGNvbG9yID0gXCJjb2xvcjogXCIgKyBmb250T2JqLmNvbG9yICsgXCI7IFwiO1xuICAgIHZhciBzaXplID0gXCJmb250LXNpemU6IFwiICsgZm9udE9iai5zaXplICsgXCJweDsgXCI7XG4gICAgdmFyIHdlaWdodCA9IFwiZm9udC13ZWlnaHQ6IFwiICsgKGZvbnRPYmouYm9sZCA/IFwiYm9sZFwiIDogXCJub3JtYWxcIikgKyBcIjsgXCI7XG4gICAgdmFyIGl0YWxpYyA9IFwiZm9udC1zdHlsZTogXCIgKyAoZm9udE9iai5pdGFsaWMgPyBcIml0YWxpY1wiIDogXCJub3JtYWxcIikgKyBcIjsgXCI7XG4gICAgdmFyIHVuZGVybGluZSA9IFwidGV4dC1kZWNvcmF0aW9uOiBcIiArIChmb250T2JqLnVuZGVybGluZSA/IFwidW5kZXJsaW5lXCIgOiBcIm5vbmVcIikgKyBcIjsgXCI7XG4gICAgdmFyIGhpZ2hsaWdodCA9IFwiYmFja2dyb3VuZC1jb2xvcjogXCIgKyBmb250T2JqLmhpZ2hsaWdodENvbG9yICsgXCI7IFwiO1xuXG4gICAgcmV0dXJuIFwiLlwiICsgY2xhc3NOYW1lICsgXCIge1wiICsgZmFtaWx5ICsgY29sb3IgKyBzaXplICsgd2VpZ2h0ICsgaXRhbGljICsgdW5kZXJsaW5lICsgaGlnaGxpZ2h0ICsgXCJ9XCI7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRDU1NSdWxlcyhydWxlcykge1xuICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBydWxlcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocnVsZXNbaV0pKTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIC8qXG4gICAqIExvYWRzIEdvb2dsZSBvciBjdXN0b20gZm9udHMsIGlmIGFwcGxpY2FibGUsIGFuZCBpbmplY3RzIENTUyBzdHlsZXNcbiAgICogaW50byB0aGUgaGVhZCBvZiB0aGUgZG9jdW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSAgICBhcnJheSAgICBzZXR0aW5ncyAgICBBcnJheSBvZiBvYmplY3RzIHdpdGggdGhlIGZvbGxvd2luZyBmb3JtOlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt7XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwiZGF0ZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmb250U2V0dGluZ1wiOiB7XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9sZDogdHJ1ZSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCJibGFja1wiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbWlseTogXCJBa3JvbmltXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiVmVyZGFuYVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJnb29nbGVcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogXCJodHRwOi8vY3VzdG9tLWZvbnQtdXJsXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodENvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRhbGljOiBmYWxzZSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBcIjIwXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZXJsaW5lOiBmYWxzZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAqXG4gICAqICAgICAgICAgICBvYmplY3QgICBjb250ZW50RG9jICAgIERvY3VtZW50IG9iamVjdCBpbnRvIHdoaWNoIHRvIGluamVjdCBzdHlsZXNcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kIGxvYWQgZm9udHMgKG9wdGlvbmFsKS5cbiAgICovXG4gIGZ1bmN0aW9uIGxvYWRGb250cyhzZXR0aW5ncywgY29udGVudERvYykge1xuICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0uY2xhc3MgJiYgaXRlbS5mb250U2V0dGluZykge1xuICAgICAgICBhZGRDU1NSdWxlcyhbIGdldEZvbnRDc3NTdHlsZShpdGVtLmNsYXNzLCBpdGVtLmZvbnRTZXR0aW5nKSBdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGl0ZW0uZm9udFNldHRpbmcuZm9udC50eXBlKSB7XG4gICAgICAgIGlmIChpdGVtLmZvbnRTZXR0aW5nLmZvbnQudHlwZSA9PT0gXCJjdXN0b21cIiAmJiBpdGVtLmZvbnRTZXR0aW5nLmZvbnQuZmFtaWx5ICYmXG4gICAgICAgICAgaXRlbS5mb250U2V0dGluZy5mb250LnVybCkge1xuICAgICAgICAgIGxvYWRDdXN0b21Gb250KGl0ZW0uZm9udFNldHRpbmcuZm9udC5mYW1pbHksIGl0ZW0uZm9udFNldHRpbmcuZm9udC51cmwsXG4gICAgICAgICAgICBjb250ZW50RG9jKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtLmZvbnRTZXR0aW5nLmZvbnQudHlwZSA9PT0gXCJnb29nbGVcIiAmJiBpdGVtLmZvbnRTZXR0aW5nLmZvbnQuZmFtaWx5KSB7XG4gICAgICAgICAgbG9hZEdvb2dsZUZvbnQoaXRlbS5mb250U2V0dGluZy5mb250LmZhbWlseSwgY29udGVudERvYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRDdXN0b21Gb250KGZhbWlseSwgdXJsLCBjb250ZW50RG9jKSB7XG4gICAgdmFyIHNoZWV0ID0gbnVsbDtcbiAgICB2YXIgcnVsZSA9IFwiZm9udC1mYW1pbHk6IFwiICsgZmFtaWx5ICsgXCI7IFwiICsgXCJzcmM6IHVybCgnXCIgKyB1cmwgKyBcIicpO1wiO1xuXG4gICAgY29udGVudERvYyA9IGNvbnRlbnREb2MgfHwgZG9jdW1lbnQ7XG5cbiAgICBzaGVldCA9IGNvbnRlbnREb2Muc3R5bGVTaGVldHNbMF07XG5cbiAgICBpZiAoc2hlZXQgIT09IG51bGwpIHtcbiAgICAgIHNoZWV0LmFkZFJ1bGUoXCJAZm9udC1mYWNlXCIsIHJ1bGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRHb29nbGVGb250KGZhbWlseSwgY29udGVudERvYykge1xuICAgIHZhciBzdHlsZXNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHN0eWxlc2hlZXQuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICBzdHlsZXNoZWV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0L2Nzc1wiKTtcbiAgICBzdHlsZXNoZWV0LnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9XCIgK1xuICAgICAgZmFtaWx5KTtcblxuICAgIGlmIChzdHlsZXNoZWV0ICE9PSBudWxsKSB7XG4gICAgICBjb250ZW50RG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzdHlsZXNoZWV0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcmVsb2FkSW1hZ2VzKHVybHMpIHtcbiAgICB2YXIgbGVuZ3RoID0gdXJscy5sZW5ndGgsXG4gICAgICBpbWFnZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGltYWdlc1tpXSA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1hZ2VzW2ldLnNyYyA9IHVybHNbaV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbWV0ZXIocGFyYW0pIHtcbiAgICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSxcbiAgICAgIHZhcnMgPSBxdWVyeS5zcGxpdChcIiZcIiksXG4gICAgICBwYWlyO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyID0gdmFyc1tpXS5zcGxpdChcIj1cIik7XG5cbiAgICAgIGlmIChwYWlyWzBdID09IHBhcmFtKSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFF1ZXJ5UGFyYW1ldGVyOiBnZXRRdWVyeVBhcmFtZXRlcixcbiAgICBnZXRGb250Q3NzU3R5bGU6ICBnZXRGb250Q3NzU3R5bGUsXG4gICAgYWRkQ1NTUnVsZXM6ICAgICAgYWRkQ1NTUnVsZXMsXG4gICAgbG9hZEZvbnRzOiAgICAgICAgbG9hZEZvbnRzLFxuICAgIGxvYWRDdXN0b21Gb250OiAgIGxvYWRDdXN0b21Gb250LFxuICAgIGxvYWRHb29nbGVGb250OiAgIGxvYWRHb29nbGVGb250LFxuICAgIHByZWxvYWRJbWFnZXM6ICAgIHByZWxvYWRJbWFnZXNcbiAgfTtcbn0pKCk7XG5cbi8qIGdsb2JhbCBjb25maWc6IHRydWUgKi9cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcbn1cblxuaWYgKHR5cGVvZiBjb25maWcgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbiAgfTtcbn1cblxuLyogZ2xvYmFsIGdhZGdldHMsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5JbWFnZSA9IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlID0gKGZ1bmN0aW9uIChnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfbW9kZTtcblxuICB2YXIgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBfbWVzc2FnZSA9IG51bGwsXG4gICAgX3BhcmFtcyA9IG51bGw7XG5cbiAgdmFyIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfbm9uU3RvcmFnZSA9IG51bGwsXG4gICAgX3NsaWRlciA9IG51bGw7XG5cbiAgdmFyIF9jdXJyZW50RmlsZXMgPSBbXTtcblxuICB2YXIgX2Vycm9yTG9nID0gbnVsbCxcbiAgICBfZXJyb3JUaW1lciA9IG51bGwsXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuXG4gIHZhciBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICB2YXIgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG5cbiAgICAvLyBBbnkgZXJyb3JzIG5lZWQgdG8gYmUgbG9nZ2VkIGJlZm9yZSB0aGUgZG9uZSBldmVudC5cbiAgICBpZiAoX2Vycm9yTG9nICE9PSBudWxsKSB7XG4gICAgICBsb2dFdmVudChfZXJyb3JMb2csIHRydWUpO1xuICAgIH1cblxuICAgIC8vIGxvZyBcImRvbmVcIiBldmVudFxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcImRvbmVcIiwgXCJmaWxlX3VybFwiOiBfZ2V0Q3VycmVudEZpbGUoKSB9LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXJFcnJvclRpbWVyKCkge1xuICAgIGNsZWFyVGltZW91dChfZXJyb3JUaW1lcik7XG4gICAgX2Vycm9yVGltZXIgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0RXJyb3JUaW1lcigpIHtcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBfZXJyb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbm90aWZ5IFZpZXdlciB3aWRnZXQgaXMgZG9uZVxuICAgICAgX2RvbmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZSgpIHtcbiAgICB2YXIgc2xpZGVOdW0gPSAtMTtcblxuICAgIGlmIChfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1swXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkpIHtcbiAgICAgICAgLy8gcmV0cmlldmUgdGhlIGN1cnJlbnRseSBwbGF5ZWQgc2xpZGVcbiAgICAgICAgc2xpZGVOdW0gPSBfc2xpZGVyLmdldEN1cnJlbnRTbGlkZSgpO1xuXG4gICAgICAgIGlmIChzbGlkZU51bSAhPT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1tzbGlkZU51bV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXG4gICAgICBkZXRhaWxzID0gbnVsbCxcbiAgICAgIGlzU3RvcmFnZUZpbGU7XG5cbiAgICAvLyBjcmVhdGUgaW5zdGFuY2Ugb2YgbWVzc2FnZVxuICAgIF9tZXNzYWdlID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIiksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2VcbiAgICBfbWVzc2FnZS5zaG93KFwiUGxlYXNlIHdhaXQgd2hpbGUgeW91ciBpbWFnZSBpcyBkb3dubG9hZGVkLlwiKTtcblxuICAgIC8vIGxlZ2FjeVxuICAgIGlmIChfcGFyYW1zLmJhY2tncm91bmQgJiYgT2JqZWN0LmtleXMoX3BhcmFtcy5iYWNrZ3JvdW5kKS5sZW5ndGggPiAwKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmQgPSBfcGFyYW1zLmJhY2tncm91bmQuY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gY3JlYXRlIHRoZSBpbWFnZSA8ZGl2PiB3aXRoaW4gdGhlIGNvbnRhaW5lciA8ZGl2PlxuICAgICAgZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJpbWFnZVwiKTtcbiAgICAgIGVsLmNsYXNzTmFtZSA9IF9wYXJhbXMucG9zaXRpb247XG4gICAgICBlbC5jbGFzc05hbWUgPSBfcGFyYW1zLnNjYWxlVG9GaXQgPyBlbC5jbGFzc05hbWUgKyBcIiBzY2FsZS10by1maXRcIiA6IGVsLmNsYXNzTmFtZTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgaXNTdG9yYWdlRmlsZSA9IChPYmplY3Qua2V5cyhfcGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XG5cbiAgICAgIGlmICghaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICBkZXRhaWxzID0gXCJjdXN0b21cIjtcblxuICAgICAgICBfbm9uU3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLk5vblN0b3JhZ2UoX3BhcmFtcyk7XG4gICAgICAgIF9ub25TdG9yYWdlLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRldGFpbHMgPSBcInN0b3JhZ2UgZmlsZVwiO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmaWxlIGluc3RhbmNlXG4gICAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZpbGUoX3BhcmFtcyk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIC8vIGNyZWF0ZSB0aGUgc2xpZGVyIGNvbnRhaW5lciA8ZGl2PiB3aXRoaW4gdGhlIGNvbnRhaW5lciA8ZGl2PlxuICAgICAgZWwuY2xhc3NOYW1lID0gXCJ0cC1iYW5uZXItY29udGFpbmVyXCI7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIGRldGFpbHMgPSBcInN0b3JhZ2UgZm9sZGVyXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmb2xkZXIgaW5zdGFuY2VcbiAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZvbGRlcihfcGFyYW1zKTtcbiAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICB9XG5cbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5sb2dFdmVudChnZXRUYWJsZU5hbWUoKSwgeyBcImV2ZW50XCI6IFwiY29uZmlndXJhdGlvblwiLCBcImV2ZW50X2RldGFpbHNcIjogZGV0YWlscyB9KTtcblxuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0U2luZ2xlSW1hZ2UodXJsKSB7XG4gICAgdmFyIGltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250YWluZXIgI2ltYWdlXCIpO1xuICAgIGltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgdXJsICsgXCIpXCI7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhhc1N0b3JhZ2VFcnJvcigpIHtcbiAgICByZXR1cm4gX3N0b3JhZ2VFcnJvckZsYWc7XG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudChwYXJhbXMsIGlzRXJyb3IpIHtcbiAgICBpZiAoaXNFcnJvcikge1xuICAgICAgX2Vycm9yTG9nID0gcGFyYW1zO1xuICAgIH1cblxuICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLmxvZ0V2ZW50KGdldFRhYmxlTmFtZSgpLCBwYXJhbXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlSW5pdCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcblxuICAgICAgLy8gcmVtb3ZlIGEgbWVzc2FnZSBwcmV2aW91c2x5IHNob3duXG4gICAgICBfbWVzc2FnZS5oaWRlKCk7XG5cbiAgICAgIHNldFNpbmdsZUltYWdlKF9jdXJyZW50RmlsZXNbMF0pO1xuXG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5XG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcblxuICAgICAgLy8gY3JlYXRlIHNsaWRlciBpbnN0YW5jZVxuICAgICAgX3NsaWRlciA9IG5ldyBSaXNlVmlzaW9uLkltYWdlLlNsaWRlcihfcGFyYW1zKTtcbiAgICAgIF9zbGlkZXIuaW5pdCh1cmxzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVSZWZyZXNoKHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmcgb2Ygb25lIHVybFxuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG5cbiAgICAgIHNldFNpbmdsZUltYWdlKF9jdXJyZW50RmlsZXNbMF0pO1xuXG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5IG9mIHVybHNcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuXG4gICAgICBfc2xpZGVyLnJlZnJlc2goX2N1cnJlbnRGaWxlcyk7XG4gICAgfVxuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuICAgIF9zdG9yYWdlRXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX2Vycm9yTG9nID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMoYWRkaXRpb25hbFBhcmFtcywgbW9kZVR5cGUpIHtcbiAgICBfcGFyYW1zID0gXy5jbG9uZShhZGRpdGlvbmFsUGFyYW1zKTtcbiAgICBfbW9kZSA9IG1vZGVUeXBlO1xuXG4gICAgX3BhcmFtcy53aWR0aCA9IF9wcmVmcy5nZXRJbnQoXCJyc1dcIik7XG4gICAgX3BhcmFtcy5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcbiAgICBpbml0KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvblNsaWRlclJlYWR5KCkge1xuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgX3NsaWRlci5wbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25TbGlkZXJDb21wbGV0ZSgpIHtcbiAgICBfZG9uZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgICAvLyBpbiBjYXNlIGVycm9yIHRpbWVyIHN0aWxsIHJ1bm5pbmcgKG5vIGNvbmRpdGlvbmFsIGNoZWNrIG9uIGVycm9yRmxhZywgaXQgbWF5IGhhdmUgYmVlbiByZXNldCBpbiBvbkZpbGVSZWZyZXNoKVxuICAgIF9jbGVhckVycm9yVGltZXIoKTtcblxuICAgIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIiAmJiBfc2xpZGVyICYmIF9zbGlkZXIuaXNSZWFkeSgpKSB7XG4gICAgICBfc2xpZGVyLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJwbGF5XCIsIFwiZmlsZV91cmxcIjogX2dldEN1cnJlbnRGaWxlKCkgfSwgZmFsc2UpO1xuXG4gICAgaWYgKF9lcnJvckZsYWcpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIgJiYgX3NsaWRlciAmJiBfc2xpZGVyLmlzUmVhZHkoKSkge1xuICAgICAgX3NsaWRlci5wbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFibGVOYW1lKCkge1xuICAgIHJldHVybiBcImltYWdlX2V2ZW50c1wiO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Vycm9yKG1lc3NhZ2UsIGlzU3RvcmFnZUVycm9yKSB7XG4gICAgX2Vycm9yRmxhZyA9IHRydWU7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSB0eXBlb2YgaXNTdG9yYWdlRXJyb3IgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICBfbWVzc2FnZS5zaG93KG1lc3NhZ2UpO1xuXG4gICAgLy8gZGVzdHJveSBzbGlkZXIgaWYgaXQgZXhpc3RzIGFuZCBwcmV2aW91c2x5IG5vdGlmaWVkIHJlYWR5XG4gICAgaWYgKF9tb2RlID09PSBcImZvbGRlclwiICYmIF9zbGlkZXIgJiYgX3NsaWRlci5pc1JlYWR5KCkpIHtcbiAgICAgIF9zbGlkZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJoYXNTdG9yYWdlRXJyb3JcIjogaGFzU3RvcmFnZUVycm9yLFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJvbkZpbGVJbml0XCI6IG9uRmlsZUluaXQsXG4gICAgXCJvbkZpbGVSZWZyZXNoXCI6IG9uRmlsZVJlZnJlc2gsXG4gICAgXCJvblNsaWRlckNvbXBsZXRlXCI6IG9uU2xpZGVyQ29tcGxldGUsXG4gICAgXCJvblNsaWRlclJlYWR5XCI6IG9uU2xpZGVyUmVhZHksXG4gICAgXCJwYXVzZVwiOiBwYXVzZSxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInNldEFkZGl0aW9uYWxQYXJhbXNcIjogc2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBcImdldFRhYmxlTmFtZVwiOiBnZXRUYWJsZU5hbWUsXG4gICAgXCJzaG93RXJyb3JcIjogc2hvd0Vycm9yLFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG59KShnYWRnZXRzKTtcblxuLyogZ2xvYmFsIF8gKi9cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uSW1hZ2UgPSBSaXNlVmlzaW9uLkltYWdlIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlLlNsaWRlciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHRvdGFsU2xpZGVzID0gMCxcbiAgICAkYXBpID0gbnVsbCxcbiAgICBjdXJyZW50RmlsZXMgPSBudWxsLFxuICAgIG5ld0ZpbGVzID0gbnVsbCxcbiAgICBuYXZUaW1lciA9IG51bGwsXG4gICAgc2xpZGVUaW1lciA9IG51bGwsXG4gICAgaXNMYXN0U2xpZGUgPSBmYWxzZSxcbiAgICByZWZyZXNoU2xpZGVyID0gZmFsc2UsXG4gICAgaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBpc1BhdXNlZCA9IGZhbHNlLFxuICAgIG5hdlRpbWVvdXQgPSAzMDAwO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGFkZFNsaWRlcygpIHtcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHAtYmFubmVyIHVsXCIpLFxuICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBzbGlkZXMgPSBbXSxcbiAgICAgIHNsaWRlID0gbnVsbCxcbiAgICAgIGltYWdlID0gbnVsbCxcbiAgICAgIHBvc2l0aW9uID0gXCJcIjtcblxuICAgIHRvdGFsU2xpZGVzID0gY3VycmVudEZpbGVzLmxlbmd0aDtcblxuICAgIGN1cnJlbnRGaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgIHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uXG4gICAgICBzbGlkZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRyYW5zaXRpb25cIiwgXCJmYWRlXCIpO1xuICAgICAgc2xpZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXN0ZXJzcGVlZFwiLCA1MDApO1xuICAgICAgc2xpZGUuc2V0QXR0cmlidXRlKFwiZGF0YS1kZWxheVwiLCBwYXJhbXMuZHVyYXRpb24gKiAxMDAwKTtcblxuICAgICAgaW1hZ2Uuc3JjID0gZmlsZS51cmw7XG5cbiAgICAgIC8vIEFsaWdubWVudFxuICAgICAgc3dpdGNoIChwYXJhbXMucG9zaXRpb24pIHtcbiAgICAgICAgY2FzZSBcInRvcC1sZWZ0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgdG9wXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0b3AtY2VudGVyXCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImNlbnRlciB0b3BcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRvcC1yaWdodFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJyaWdodCB0b3BcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1pZGRsZS1sZWZ0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgY2VudGVyXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtaWRkbGUtY2VudGVyXCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImNlbnRlciBjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1pZGRsZS1yaWdodFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJyaWdodCBjZW50ZXJcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJvdHRvbS1sZWZ0XCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImxlZnQgYm90dG9tXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJib3R0b20tY2VudGVyXCI6XG4gICAgICAgICAgcG9zaXRpb24gPSBcImNlbnRlciBib3R0b21cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJvdHRvbS1yaWdodFwiOlxuICAgICAgICAgIHBvc2l0aW9uID0gXCJyaWdodCBib3R0b21cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwb3NpdGlvbiA9IFwibGVmdCB0b3BcIjtcbiAgICAgIH1cblxuICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1iZ3Bvc2l0aW9uXCIsIHBvc2l0aW9uKTtcblxuICAgICAgLy8gU2NhbGUgdG8gRml0XG4gICAgICBpZiAocGFyYW1zLnNjYWxlVG9GaXQpIHtcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1iZ2ZpdFwiLCBcImNvbnRhaW5cIik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1iZ2ZpdFwiLCBcIm5vcm1hbFwiKTtcbiAgICAgIH1cblxuICAgICAgc2xpZGUuYXBwZW5kQ2hpbGQoaW1hZ2UpO1xuICAgICAgc2xpZGVzLnB1c2goc2xpZGUpO1xuICAgIH0pO1xuXG4gICAgc2xpZGVzLmZvckVhY2goZnVuY3Rpb24oc2xpZGUpIHtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHNsaWRlKTtcbiAgICB9KTtcblxuICAgIGxpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25TbGlkZUNoYW5nZWQoZGF0YSkge1xuICAgIGlmIChpc1BhdXNlZCkge1xuICAgICAgJGFwaS5yZXZwYXVzZSgpO1xuICAgIH1cbiAgICAvLyBEb24ndCBjYWxsIFwiZG9uZVwiIGlmIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgc2xpZGVzaG93LlxuICAgIGVsc2Uge1xuICAgICAgaWYgKGlzTGFzdFNsaWRlKSB7XG4gICAgICAgIGlzTGFzdFNsaWRlID0gZmFsc2U7XG4gICAgICAgICRhcGkucmV2cGF1c2UoKTtcbiAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vblNsaWRlckNvbXBsZXRlKCk7XG5cbiAgICAgICAgaWYgKHJlZnJlc2hTbGlkZXIpIHtcbiAgICAgICAgICAvLyBEZXN0cm95IGFuZCByZWNyZWF0ZSB0aGUgc2xpZGVyIGlmIHRoZSBmaWxlcyBoYXZlIGNoYW5nZWQuXG4gICAgICAgICAgaWYgKCRhcGkpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lTbGlkZXIoKTtcbiAgICAgICAgICAgIGluaXQobmV3RmlsZXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlZnJlc2hTbGlkZXIgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLnNsaWRlSW5kZXggPT09IHRvdGFsU2xpZGVzKSB7XG4gICAgICBpc0xhc3RTbGlkZSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveVNsaWRlcigpIHtcbiAgICAvLyBSZW1vdmUgZXZlbnQgaGFuZGxlcnMuXG4gICAgJChcImJvZHlcIikub2ZmKFwidG91Y2hlbmRcIik7XG4gICAgJGFwaS5vZmYoXCJyZXZvbHV0aW9uLnNsaWRlLm9ubG9hZGVkXCIpO1xuICAgICRhcGkub2ZmKFwicmV2b2x1dGlvbi5zbGlkZS5vbmNoYW5nZVwiKTtcblxuICAgIC8vIExldCB0aGUgc2xpZGVyIGNsZWFuIHVwIGFmdGVyIGl0c2VsZi5cbiAgICAkYXBpLnJldmtpbGwoKTtcbiAgICAkYXBpID0gbnVsbDtcbiAgfVxuXG4gIC8vIFVzZXIgaGFzIGludGVyYWN0ZWQgd2l0aCB0aGUgc2xpZGVzaG93LlxuICBmdW5jdGlvbiBoYW5kbGVVc2VyQWN0aXZpdHkoKSB7XG4gICAgaXNQYXVzZWQgPSB0cnVlO1xuICAgIGNsZWFyVGltZW91dChzbGlkZVRpbWVyKTtcblxuICAgIC8vIE1vdmUgdG8gbmV4dCBzbGlkZSBhbmQgcmVzdW1lIHRoZSBzbGlkZXNob3cgYWZ0ZXIgYSBkZWxheS5cbiAgICBzbGlkZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlzUGF1c2VkID0gZmFsc2U7XG4gICAgICAkYXBpLnJldm5leHQoKTtcbiAgICAgICRhcGkucmV2cmVzdW1lKCk7XG4gICAgfSwgcGFyYW1zLnBhdXNlICogMTAwMCk7XG5cbiAgICBoaWRlTmF2KCk7XG4gIH1cblxuICAvLyBIaWRlIHRoZSBuYXZpZ2F0aW9uIGFmdGVyIGEgZGVsYXkuXG4gIGZ1bmN0aW9uIGhpZGVOYXYoKSB7XG4gICAgaWYgKHBhcmFtcy5hdXRvSGlkZSkge1xuICAgICAgY2xlYXJUaW1lb3V0KG5hdlRpbWVyKTtcblxuICAgICAgbmF2VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIikuYWRkQ2xhc3MoXCJoaWRlYXJyb3dzXCIpO1xuICAgICAgfSwgbmF2VGltZW91dCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqICBUT0RPOiBUZXN0IHdoYXQgaGFwcGVucyB3aGVuIGZvbGRlciBpc24ndCBmb3VuZC5cbiAgICovXG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgaWYgKCRhcGkpIHtcbiAgICAgIGlzTGFzdFNsaWRlID0gZmFsc2U7XG4gICAgICAkYXBpLnJldnBhdXNlKCk7XG4gICAgICBkZXN0cm95U2xpZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVudFNsaWRlKCkge1xuICAgIGlmICgkYXBpICYmIGN1cnJlbnRGaWxlcyAmJiBjdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuICRhcGkucmV2Y3VycmVudHNsaWRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdChmaWxlcykge1xuICAgIHZhciB0cEJhbm5lckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHAtYmFubmVyLWNvbnRhaW5lclwiKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgdHBCYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG5cbiAgICB0cEJhbm5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRwLWJhbm5lclwiKTtcbiAgICB0cEJhbm5lci5hcHBlbmRDaGlsZCh1bCk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodHBCYW5uZXIpO1xuICAgIHRwQmFubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIGN1cnJlbnRGaWxlcyA9IF8uY2xvbmUoZmlsZXMpO1xuXG4gICAgYWRkU2xpZGVzKCk7XG5cbiAgICBpc0xvYWRpbmcgPSB0cnVlO1xuICAgICRhcGkgPSAkKFwiLnRwLWJhbm5lclwiKS5yZXZvbHV0aW9uKHtcbiAgICAgIFwiaGlkZVRodW1ic1wiOiAwLFxuICAgICAgXCJoaWRlVGltZXJCYXJcIjogXCJvblwiLFxuICAgICAgXCJuYXZpZ2F0aW9uVHlwZVwiOiBcIm5vbmVcIixcbiAgICAgIFwib25Ib3ZlclN0b3BcIjogXCJvZmZcIixcbiAgICAgIFwic3RhcnR3aWR0aFwiOiBwYXJhbXMud2lkdGgsXG4gICAgICBcInN0YXJ0aGVpZ2h0XCI6IHBhcmFtcy5oZWlnaHRcbiAgICB9KTtcblxuICAgICRhcGkub24oXCJyZXZvbHV0aW9uLnNsaWRlLm9ubG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUGF1c2Ugc2xpZGVzaG93IHNpbmNlIGl0IHdpbGwgYXV0b3BsYXkgYW5kIHRoaXMgaXMgbm90IGNvbmZpZ3VyYWJsZS5cbiAgICAgICRhcGkucmV2cGF1c2UoKTtcbiAgICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vblNsaWRlclJlYWR5KCk7XG4gICAgfSk7XG5cbiAgICAkYXBpLm9uKFwicmV2b2x1dGlvbi5zbGlkZS5vbmNoYW5nZVwiLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICAgb25TbGlkZUNoYW5nZWQoZGF0YSk7XG4gICAgfSk7XG5cbiAgICAvLyBTd2lwZSB0aGUgc2xpZGVyLlxuICAgICQoXCJib2R5XCIpLm9uKFwidG91Y2hlbmRcIiwgXCIudHAtYmFubmVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgaGFuZGxlVXNlckFjdGl2aXR5KCk7XG4gICAgICAkKFwiLnRwLWxlZnRhcnJvdywgLnRwLXJpZ2h0YXJyb3dcIikucmVtb3ZlQ2xhc3MoXCJoaWRlYXJyb3dzXCIpO1xuICAgIH0pO1xuXG4gICAgLy8gVG91Y2ggdGhlIG5hdmlnYXRpb24gYXJyb3dzLlxuICAgICQoXCJib2R5XCIpLm9uKFwidG91Y2hlbmRcIiwgXCIudHAtbGVmdGFycm93LCAudHAtcmlnaHRhcnJvd1wiLCBmdW5jdGlvbigpIHtcbiAgICAgIGhhbmRsZVVzZXJBY3Rpdml0eSgpO1xuICAgIH0pO1xuXG4gICAgaGlkZU5hdigpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNSZWFkeSgpIHtcbiAgICByZXR1cm4gIWlzTG9hZGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgaWYgKCRhcGkpIHtcbiAgICAgICRhcGkucmV2cmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgaWYgKCRhcGkpIHtcbiAgICAgICRhcGkucmV2cGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWZyZXNoKGZpbGVzKSB7XG4gICAgLy8gU3RhcnQgcHJlbG9hZGluZyBpbWFnZXMgcmlnaHQgYXdheS5cbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMucHJlbG9hZEltYWdlcyhmaWxlcyk7XG4gICAgbmV3RmlsZXMgPSBfLmNsb25lKGZpbGVzKTtcbiAgICByZWZyZXNoU2xpZGVyID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRDdXJyZW50U2xpZGVcIjogZ2V0Q3VycmVudFNsaWRlLFxuICAgIFwiZGVzdHJveVwiOiBkZXN0cm95LFxuICAgIFwiaW5pdFwiOiBpbml0LFxuICAgIFwiaXNSZWFkeVwiOiBpc1JlYWR5LFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJyZWZyZXNoXCI6IHJlZnJlc2hcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcgKi9cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uSW1hZ2UgPSBSaXNlVmlzaW9uLkltYWdlIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlLlN0b3JhZ2VGaWxlID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2luaXRpYWxMb2FkID0gdHJ1ZTtcblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwicmlzZS1zdG9yYWdlXCIpO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciB1cmw7XG5cbiAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcblxuICAgICAgICB1cmwgPSBlLmRldGFpbC51cmwucmVwbGFjZShcIidcIiwgXCJcXFxcJ1wiKTtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZUluaXQodXJsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBjaGVjayBmb3IgXCJjaGFuZ2VkXCIgcHJvcGVydHlcbiAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpKSB7XG4gICAgICAgICAgICBpZiAoZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgICAgICAgICBSaXNlVmlzaW9uLkltYWdlLm9uRmlsZVJlZnJlc2godXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLyBpbiB0aGUgZXZlbnQgb2YgYSBuZXR3b3JrIGZhaWx1cmUgYW5kIHJlY292ZXJ5LCBjaGVjayBpZiB0aGUgV2lkZ2V0IGlzIGluIGEgc3RhdGUgb2Ygc3RvcmFnZSBlcnJvclxuICAgICAgICAgICAgICBpZiAoUmlzZVZpc2lvbi5JbWFnZS5oYXNTdG9yYWdlRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZmlsZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwiZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwic3RvcmFnZSBmaWxlIG5vdCBmb3VuZFwiLFxuICAgICAgICBcImZpbGVfdXJsXCI6IGUuZGV0YWlsXG4gICAgICB9LFxuICAgICAgICBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlXCIpO1xuXG4gICAgICAvLyBjbGVhciB0aGUgZXhpc3RpbmcgaW1hZ2VcbiAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgaW1hZ2UgZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZpbGUtdGhyb3R0bGVkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJzdG9yYWdlIGZpbGUgdGhyb3R0bGVkXCIsXG4gICAgICAgIFwiZmlsZV91cmxcIjogZS5kZXRhaWxcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGltYWdlIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZVVybCA9IChlLmRldGFpbCAmJiBlLmRldGFpbC5yZXF1ZXN0ICYmIGUuZGV0YWlsLnJlcXVlc3QudXJsKSA/IGUuZGV0YWlsLnJlcXVlc3QudXJsIDogbnVsbCxcbiAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInJpc2Ugc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICAgIFwiZXJyb3JfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzLFxuICAgICAgICAgIFwiZmlsZV91cmxcIjogZmlsZVVybFxuICAgICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZVVybCA9IChlLmRldGFpbCAmJiBlLmRldGFpbC5yZXF1ZXN0ICYmIGUuZGV0YWlsLnJlcXVlc3QudXJsKSA/IGUuZGV0YWlsLnJlcXVlc3QudXJsIDogbnVsbCxcbiAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJlcnJvclwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInJpc2UgY2FjaGUgZXJyb3JcIixcbiAgICAgICAgICBcImVycm9yX2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1cyxcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IGZpbGVVcmxcbiAgICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIHBhcmFtcy5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBwYXJhbXMuc3RvcmFnZS5maWxlTmFtZSk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgcGFyYW1zLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZUZvbGRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBfZmlsZXMgPSBbXSxcbiAgICBfdGltZXIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIHByb2Nlc3NVcmwoZSkge1xuICAgIHZhciBmaWxlO1xuXG4gICAgaWYgKGUuZGV0YWlsKSB7XG5cbiAgICAgIC8vIEltYWdlIGhhcyBiZWVuIGFkZGVkLlxuICAgICAgaWYgKGUuZGV0YWlsLmFkZGVkKSB7XG4gICAgICAgIF9maWxlcy5wdXNoKHtcbiAgICAgICAgICBcIm5hbWVcIjogZS5kZXRhaWwubmFtZSxcbiAgICAgICAgICBcInVybFwiOiBlLmRldGFpbC51cmxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEltYWdlIGhhcyBiZWVuIGNoYW5nZWQuXG4gICAgICBpZiAoZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgICBmaWxlID0gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gZmlsZS5uYW1lID09PSBlLmRldGFpbC5uYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICBmaWxlLnVybCA9IGUuZGV0YWlsLnVybDtcbiAgICAgIH1cblxuICAgICAgLy8gSW1hZ2UgaGFzIGJlZW4gZGVsZXRlZC5cbiAgICAgIGlmIChlLmRldGFpbC5kZWxldGVkKSB7XG4gICAgICAgIF9maWxlcyA9IF8ucmVqZWN0KF9maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGUuZGV0YWlsLm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9maWxlcyA9IF8uc29ydEJ5KF9maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgcmV0dXJuIGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UoZSkge1xuICAgIHByb2Nlc3NVcmwoZSk7XG5cbiAgICAvLyBJbWFnZSBoYXMgYmVlbiBhZGRlZC5cbiAgICBpZiAoZS5kZXRhaWwuYWRkZWQpIHtcbiAgICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICAgIC8vIE5lZWQgdG8gd2FpdCBmb3IgYXQgbGVhc3QgMiBpbWFnZXMgdG8gbG9hZCBiZWZvcmUgaW5pdGlhbGl6aW5nIHRoZSBzbGlkZXIuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIHJldm9sdXRpb24uc2xpZGUub25jaGFuZ2UgZXZlbnQgd2lsbCBuZXZlciBmaXJlLCBhbmQgdGhpcyBldmVudCBpcyB1c2VkXG4gICAgICAgIC8vIHRvIGNoZWNrIHdoZXRoZXIgb3Igbm90IHRoZSBzbGlkZXIgc2hvdWxkIHJlZnJlc2guXG4gICAgICAgIGlmIChfZmlsZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIGNsZWFyVGltZW91dChfdGltZXIpO1xuICAgICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uub25GaWxlSW5pdChfZmlsZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBhIHRpbWVvdXQgaW4gY2FzZSB0aGVyZSBpcyBvbmx5IG9uZSBpbWFnZSBpbiB0aGUgZm9sZGVyLlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVJbml0KF9maWxlcyk7XG4gICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVW5jaGFuZ2VkXG4gICAgaWYgKGUuZGV0YWlsLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSAmJiAhZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgIGlmICghUmlzZVZpc2lvbi5JbWFnZS5oYXNTdG9yYWdlRXJyb3IoKSkge1xuICAgICAgICAvLyBvbmx5IHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIGJlbG93IGlmIHRoZXJlJ3MgYmVlbiBhIHN0b3JhZ2UgZXJyb3IsIG90aGVyd2lzZSBkbyBub3RoaW5nXG4gICAgICAgIC8vIHRoaXMgaXMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHNsaWRlc2hvdyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVSZWZyZXNoKF9maWxlcyk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwicmlzZS1zdG9yYWdlXCIpO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGhhbmRsZVJlc3BvbnNlKTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lbXB0eS1mb2xkZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2UgZm9sZGVyIGVtcHR5XCJcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBjb250YWluIGFueSBpbWFnZXMuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZvbGRlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcInN0b3JhZ2UgZm9sZGVyIGRvZXNuJ3QgZXhpc3RcIixcbiAgICAgICAgXCJlcnJvcl9kZXRhaWxzXCI6IGUuZGV0YWlsXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIHN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIiwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLkltYWdlLnNob3dFcnJvcihcIlRoZXJlIHdhcyBhIHByb2JsZW0gcmV0cmlldmluZyB0aGUgZmlsZSBmcm9tIFJpc2UgQ2FjaGUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlVHlwZVwiLCBcImltYWdlXCIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuc3RvcmFnZS5mb2xkZXIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG5cbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlID0gUmlzZVZpc2lvbi5JbWFnZSB8fCB7fTtcblxuUmlzZVZpc2lvbi5JbWFnZS5Ob25TdG9yYWdlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHJpc2VDYWNoZSA9IFJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZTtcblxuICB2YXIgX3JlZnJlc2hEdXJhdGlvbiA9IDMwMDAwMCwgIC8vIDUgbWludXRlc1xuICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IG51bGw7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlO1xuXG4gIHZhciBfdXJsID0gXCJcIjtcblxuICBmdW5jdGlvbiBfZ2V0RmlsZShvbWl0Q2FjaGVCdXN0ZXIpIHtcbiAgICB2YXIgcGFyYW1zO1xuXG4gICAgcmlzZUNhY2hlLmdldEZpbGUoX3VybCwgZnVuY3Rpb24gKHJlc3BvbnNlLCBlcnJvcikge1xuICAgICAgaWYgKCFlcnJvcikge1xuXG4gICAgICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVJbml0KHJlc3BvbnNlLnVybCk7XG5cbiAgICAgICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBpbnRlcnZhbFxuICAgICAgICAgIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5vbkZpbGVSZWZyZXNoKHJlc3BvbnNlLnVybCk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBlcnJvciBvY2N1cnJlZFxuICAgICAgICBwYXJhbXMgPSB7XG4gICAgICAgICAgXCJldmVudFwiOiBcImVycm9yXCIsXG4gICAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwibm9uLXN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgICBcImVycm9yX2RldGFpbHNcIjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IHJlc3BvbnNlLnVybFxuICAgICAgICB9O1xuXG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2UubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgICAgUmlzZVZpc2lvbi5JbWFnZS5zaG93RXJyb3IoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiKTtcbiAgICAgIH1cbiAgICB9LCBvbWl0Q2FjaGVCdXN0ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0UmVmcmVzaEludGVydmFsKCkge1xuICAgIGlmIChfcmVmcmVzaEludGVydmFsSWQgPT09IG51bGwpIHtcbiAgICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2dldEZpbGUoZmFsc2UpO1xuICAgICAgfSwgX3JlZnJlc2hEdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIC8vIEhhbmRsZSBwcmUtbWVyZ2UgdXNlIG9mIFwidXJsXCIgc2V0dGluZyBwcm9wZXJ0eVxuICAgIF91cmwgPSAoZGF0YS51cmwgJiYgZGF0YS51cmwgIT09IFwiXCIpID8gZGF0YS51cmwgOiBkYXRhLnNlbGVjdG9yLnVybDtcblxuICAgIF9nZXRGaWxlKHRydWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmIChfYWN0aXZlKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIC8vIHNob3cgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICAvLyBjcmVhdGUgbWVzc2FnZSBlbGVtZW50XG4gICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICBwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZVwiKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgaWQgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBkb2N1bWVudC5ib2R5Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lcywgdmFsdWVzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMsIG1vZGU7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzBdKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCFhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIGZvbGRlciB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZvbGRlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub24tc3RvcmFnZSBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLkltYWdlLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uSW1hZ2UucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLkltYWdlLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgY29uZmlndXJlKTtcbiAgICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxufSkod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcblxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNTcwOTIxNTktMyddKTtcbl9nYXEucHVzaChbJ190cmFja1BhZ2V2aWV3J10pO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IGdhLmFzeW5jID0gdHJ1ZTtcbiAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJztcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xufSkoKTtcbi8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
