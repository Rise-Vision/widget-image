if("undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),"undefined"==typeof config)var config={STORAGE_ENV:"prod"};var RiseVision=RiseVision||{};RiseVision.Image={},RiseVision.Image=function(e){"use strict";function t(){var e,t=null;c.className=r.position,c.className=r.scaleToFit?c.className+" scale-to-fit":c.className,document.body.style.background=r.background.color,0===Object.keys(r.storage).length?(e=r.url.split("?"),g=1===e.length?"?":"&",c.style.backgroundImage="url("+r.url+g+"cb="+(new Date).getTime()+")",n(),o()):(d=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),d.show("Please wait while your image is downloaded."),t=new RiseVision.Image.Storage(r),t.init(),o())}function i(){d.show("The selected image does not exist.")}function n(){setTimeout(function(){c.style.backgroundImage="url("+r.url+g+"cb="+(new Date).getTime()+")",n()},u)}function s(e,i){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(i)&&i.length>0&&(r=JSON.parse(i[0]),document.getElementById("container").style.height=l.getInt("rsH")+"px",t())}function o(){e.rpc.call("","rsevent_ready",null,l.getString("id"),!1,!1,!1,!0,!1)}function a(){d.hide()}var r,l=new e.Prefs,c=document.getElementById("image"),g="",d=null,u=3e5;return{getAdditionalParams:s,noStorageFile:i,storageFileUpdate:a}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function i(){try{t.style.height=e.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(o){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",o=!1}}function s(i){var n,s=document.createDocumentFragment();o?(n=t.querySelector(".message"),n.innerHTML=i):(e.style.visibility="hidden",t.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),n.style.lineHeight=t.style.height,s.appendChild(n),t.appendChild(s),o=!0)}var o=!1;return i(),{hide:n,show:s}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.Storage=function(e){"use strict";function t(){var t=document.querySelector("rise-storage"),i=document.getElementById("image");t.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(i.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')",RiseVision.Image.storageFileUpdate())}),t.addEventListener("rise-storage-no-file",function(){i.style.background="",RiseVision.Image.noStorageFile()}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go()}return{init:t}},function(e,t,i){"use strict";var n=(new i.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},e.addEventListener("WebComponentsReady",function(){i.rpc.register("rsparam_set_"+n,RiseVision.Image.getAdditionalParams),i.rpc.call("","rsparam_get",null,n,["additionalParams"])})}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJSaXNlVmlzaW9uIiwiSW1hZ2UiLCJnYWRnZXRzIiwiaW5pdCIsInN0ciIsInN0b3JhZ2UiLCJpbWciLCJjbGFzc05hbWUiLCJwYXJhbXMiLCJwb3NpdGlvbiIsInNjYWxlVG9GaXQiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsImJhY2tncm91bmQiLCJjb2xvciIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJ1cmwiLCJzcGxpdCIsInNlcGFyYXRvciIsImJhY2tncm91bmRJbWFnZSIsIkRhdGUiLCJnZXRUaW1lIiwic3RhcnRUaW1lciIsInJlYWR5IiwibWVzc2FnZSIsIkNvbW1vbiIsIk1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsInNob3ciLCJTdG9yYWdlIiwibm9TdG9yYWdlRmlsZSIsInNldFRpbWVvdXQiLCJyZWZyZXNoSW50ZXJ2YWwiLCJnZXRBZGRpdGlvbmFsUGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJoZWlnaHQiLCJwcmVmcyIsImdldEludCIsInJwYyIsImNhbGwiLCJnZXRTdHJpbmciLCJzdG9yYWdlRmlsZVVwZGF0ZSIsImhpZGUiLCJQcmVmcyIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJlIiwiY29uc29sZSIsIndhcm4iLCJfYWN0aXZlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGlzcGxheSIsInZpc2liaWxpdHkiLCJwIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJsaW5lSGVpZ2h0IiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZGV0YWlsIiwicmVwbGFjZSIsImZvbGRlciIsImZpbGVOYW1lIiwiY29tcGFueUlkIiwiZ28iLCJ3aW5kb3ciLCJpZCIsIm9uY29udGV4dG1lbnUiLCJvbm1vdXNlZG93biIsInJlZ2lzdGVyIiwiX2dhcSIsInB1c2giLCJnYSIsInR5cGUiLCJhc3luYyIsInNyYyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFRQSxHQU51QixtQkFBWkEsVUFDVEEsUUFBUUMsT0FBTyxvQ0FDWkMsU0FBUyxpQkFBa0Isd0JBQzNCQSxTQUFTLGdCQUFpQixTQUdULG1CQUFYQyxRQUNULEdBQUlBLFNBQ0ZDLFlBQWEsT0FNakIsSUFBSUMsWUFBYUEsY0FDakJBLFlBQVdDLFNBRVhELFdBQVdDLE1BQVEsU0FBV0MsR0FDNUIsWUFZQSxTQUFTQyxLQUNQLEdBQ0VDLEdBREVDLEVBQVUsSUFHZEMsR0FBSUMsVUFBWUMsRUFBT0MsU0FDdkJILEVBQUlDLFVBQVlDLEVBQU9FLFdBQWFKLEVBQUlDLFVBQVksZ0JBQWtCRCxFQUFJQyxVQUMxRUksU0FBU0MsS0FBS0MsTUFBTUMsV0FBYU4sRUFBT00sV0FBV0MsTUFFUixJQUF2Q0MsT0FBT0MsS0FBS1QsRUFBT0gsU0FBU2EsUUFDOUJkLEVBQU1JLEVBQU9XLElBQUlDLE1BQU0sS0FHckJDLEVBRGlCLElBQWZqQixFQUFJYyxPQUNNLElBR0EsSUFHZFosRUFBSU8sTUFBTVMsZ0JBQWtCLE9BQVNkLEVBQU9XLElBQU1FLEVBQVksT0FBUSxHQUFJRSxPQUFPQyxVQUFZLElBQzdGQyxJQUNBQyxNQUtBQyxFQUFVLEdBQUkzQixZQUFXNEIsT0FBT0MsUUFBUWxCLFNBQVNtQixlQUFlLGFBQzlEbkIsU0FBU21CLGVBQWUscUJBRzFCSCxFQUFRSSxLQUFLLCtDQUViMUIsRUFBVSxHQUFJTCxZQUFXQyxNQUFNK0IsUUFBUXhCLEdBQ3ZDSCxFQUFRRixPQUVSdUIs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dkUsRUFBUWdFLGFBQWEsWUFBYTdELEVBQU9ILFFBQVF3RSxXQUNqRHhFLEVBQVFnRSxhQUFhLE1BQU92RSxPQUFPQyxhQUNuQ00sRUFBUXlFLEtBR1YsT0FDRTNFLEtBQVFBLElBS1osU0FBVzRFLEVBQVFwRSxFQUFVVCxHQUMzQixZQUVBLElBQUk4RSxJQUFLLEdBQUk5RSxHQUFRaUQsT0FBUUgsVUFBVSxLQUV2QytCLEdBQU9FLGNBQWdCLFdBQ3JCLE9BQU8sR0FHVHRFLEVBQVNDLEtBQUtzRSxZQUFjLFdBQzFCLE9BQU8sR0FHVEgsRUFBT1AsaUJBQWlCLHFCQUFzQixXQUM1Q3RFLEVBQVE0QyxJQUFJcUMsU0FBUyxlQUFpQkgsRUFBSWhGLFdBQVdDLE1BQU1tQyxxQkFDM0RsQyxFQUFRNEMsSUFBSUMsS0FBSyxHQUFJLGNBQWUsS0FBTWlDLEdBQUssd0JBRWhERCxPQUFRcEUsU0FBVVQsUUFHckIsSUFBSWtGLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLM0UsU0FBU3lELGNBQWMsU0FBV2tCLEdBQUdDLEtBQU8sa0JBQW1CRCxFQUFHRSxPQUFRLEVBQ25GRixFQUFHRyxLQUFPLFVBQVk5RSxTQUFTK0UsU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSWpGLFNBQVNrRixxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhVCxFQUFJTSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGNvbmZpZzogdHJ1ZSAqL1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xufVxuXG5pZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgY29uZmlnID0ge1xuICAgIFNUT1JBR0VfRU5WOiBcInByb2RcIlxuICB9O1xufVxuXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlID0ge307XG5cblJpc2VWaXNpb24uSW1hZ2UgPSAoZnVuY3Rpb24gKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHBhcmFtcyxcbiAgICBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKSxcbiAgICBzZXBhcmF0b3IgPSBcIlwiLFxuICAgIG1lc3NhZ2UgPSBudWxsLFxuICAgIHJlZnJlc2hJbnRlcnZhbCA9IDMwMDAwMDsgIC8vIDUgbWludXRlc1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBudWxsLFxuICAgICAgc3RyO1xuXG4gICAgaW1nLmNsYXNzTmFtZSA9IHBhcmFtcy5wb3NpdGlvbjtcbiAgICBpbWcuY2xhc3NOYW1lID0gcGFyYW1zLnNjYWxlVG9GaXQgPyBpbWcuY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCIgOiBpbWcuY2xhc3NOYW1lO1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IHBhcmFtcy5iYWNrZ3JvdW5kLmNvbG9yO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHBhcmFtcy5zdG9yYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHN0ciA9IHBhcmFtcy51cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBzZXBhcmF0b3IgPSBcIj9cIjtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZXBhcmF0b3IgPSBcIiZcIjtcbiAgICAgIH1cblxuICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgcGFyYW1zLnVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiKVwiO1xuICAgICAgc3RhcnRUaW1lcigpO1xuICAgICAgcmVhZHkoKTtcbiAgICB9XG4gICAgLy8gUmlzZSBTdG9yYWdlXG4gICAgZWxzZSB7XG4gICAgICAvLyBjcmVhdGUgaW5zdGFuY2Ugb2YgbWVzc2FnZVxuICAgICAgbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgICAvLyBzaG93IHdhaXQgbWVzc2FnZSB3aGlsZSBTdG9yYWdlIGluaXRpYWxpemVzXG4gICAgICBtZXNzYWdlLnNob3coXCJQbGVhc2Ugd2FpdCB3aGlsZSB5b3VyIGltYWdlIGlzIGRvd25sb2FkZWQuXCIpO1xuXG4gICAgICBzdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZShwYXJhbXMpO1xuICAgICAgc3RvcmFnZS5pbml0KCk7XG5cbiAgICAgIHJlYWR5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbm9TdG9yYWdlRmlsZSgpIHtcbiAgICBtZXNzYWdlLnNob3coXCJUaGUgc2VsZWN0ZWQgaW1hZ2UgZG9lcyBub3QgZXhpc3QuXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRUaW1lcigpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgcGFyYW1zLnVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiKVwiO1xuICAgICAgc3RhcnRUaW1lcigpO1xuICAgIH0sIHJlZnJlc2hJbnRlcnZhbCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldEFkZGl0aW9uYWxQYXJhbXMobmFtZXMsIHZhbHVlcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIG5hbWVzWzBdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMgPSBKU09OLnBhcnNlKHZhbHVlc1swXSk7XG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuICAgICAgICBpbml0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksIGZhbHNlLFxuICAgICAgZmFsc2UsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9yYWdlRmlsZVVwZGF0ZSgpIHtcbiAgICAvLyByZW1vdmUgYSBtZXNzYWdlIHByZXZpb3VzbHkgc2hvd25cbiAgICBtZXNzYWdlLmhpZGUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRBZGRpdGlvbmFsUGFyYW1zXCI6IGdldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJub1N0b3JhZ2VGaWxlXCI6IG5vU3RvcmFnZUZpbGUsXG4gICAgXCJzdG9yYWdlRmlsZVVwZGF0ZVwiOiBzdG9yYWdlRmlsZVVwZGF0ZVxuICB9O1xufSkoZ2FkZ2V0cyk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FjdGl2ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIHRyeSB7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG1haW5Db250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNhbid0IGluaXRpYWxpemUgTWVzc2FnZSAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoX2FjdGl2ZSkge1xuICAgICAgLy8gY2xlYXIgY29udGVudCBvZiBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgd2hpbGUgKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cobWVzc2FnZSkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHA7XG5cbiAgICBpZiAoIV9hY3RpdmUpIHtcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG4gICAgICBwLnN0eWxlLmxpbmVIZWlnaHQgPSBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIGNvbmZpZyAqL1xudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5JbWFnZSA9IFJpc2VWaXNpb24uSW1hZ2UgfHwge307XG5cblJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInJpc2Utc3RvcmFnZVwiKSxcbiAgICAgIGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2VcIik7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuICAgICAgICAvLyBFc2NhcGUgc2luZ2xlIHF1b3Rlcy5cbiAgICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKCdcIiArIGUuZGV0YWlsLnVybC5yZXBsYWNlKFwiJ1wiLCBcIlxcXFwnXCIpICsgXCInKVwiO1xuXG4gICAgICAgIFJpc2VWaXNpb24uSW1hZ2Uuc3RvcmFnZUZpbGVVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1maWxlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgLy8gY2xlYXIgdGhlIGV4aXN0aW5nIGltYWdlXG4gICAgICBpbWcuc3R5bGUuYmFja2dyb3VuZCA9IFwiXCI7XG5cbiAgICAgIFJpc2VWaXNpb24uSW1hZ2Uubm9TdG9yYWdlRmlsZSgpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgcGFyYW1zLnN0b3JhZ2UuZm9sZGVyKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIHBhcmFtcy5zdG9yYWdlLmZpbGVOYW1lKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBwYXJhbXMuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMgKi9cbihmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCwgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgaWQgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBkb2N1bWVudC5ib2R5Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIGZ1bmN0aW9uKCkge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgUmlzZVZpc2lvbi5JbWFnZS5nZXRBZGRpdGlvbmFsUGFyYW1zKTtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICB9KTtcbn0pKHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMpO1xuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTMnXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
