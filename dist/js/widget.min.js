if("undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),"undefined"==typeof config)var config={STORAGE_ENV:"prod"};var RiseVision=RiseVision||{};RiseVision.Image={},RiseVision.Image=function(e){"use strict";function t(){var e,t=null;c.className=r.position,c.className=r.scaleToFit?c.className+" scale-to-fit":c.className,document.body.style.background=r.background.color,0===Object.keys(r.storage).length?(e=r.url.split("?"),g=1===e.length?"?":"&",c.style.backgroundImage="url("+r.url+g+"cb="+(new Date).getTime()+")",n(),o()):(d=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),d.show("Please wait while your image is downloaded."),t=new RiseVision.Image.Storage(r),t.init(),o())}function i(){d.show("The selected image does not exist.")}function n(){setTimeout(function(){c.style.backgroundImage="url("+r.url+g+"cb="+(new Date).getTime()+")",n()},u)}function s(e,i){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(i)&&i.length>0&&(r=JSON.parse(i[0]),document.getElementById("container").style.height=l.getInt("rsH")+"px",t())}function o(){e.rpc.call("","rsevent_ready",null,l.getString("id"),!1,!1,!1,!0,!1)}function a(){d.hide()}var r,l=new e.Prefs,c=document.getElementById("image"),g="",d=null,u=3e5;return{getAdditionalParams:s,noStorageFile:i,storageFileUpdate:a}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function i(){try{t.style.height=e.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(o){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",o=!1}}function s(i){var n,s=document.createDocumentFragment();o?(n=t.querySelector(".message"),n.innerHTML=i):(e.style.visibility="hidden",t.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),s.appendChild(n),t.appendChild(s),o=!0)}var o=!1;return i(),{hide:n,show:s}};var RiseVision=RiseVision||{};RiseVision.Image=RiseVision.Image||{},RiseVision.Image.Storage=function(e){"use strict";function t(){var t=document.querySelector("rise-storage"),i=document.getElementById("image");t.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(i.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')",RiseVision.Image.storageFileUpdate())}),t.addEventListener("rise-storage-no-file",function(){i.style.background="",RiseVision.Image.noStorageFile()}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go()}return{init:t}},function(e,t,i){"use strict";var n=(new i.Prefs).getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},e.addEventListener("WebComponentsReady",function(){i.rpc.register("rsparam_set_"+n,RiseVision.Image.getAdditionalParams),i.rpc.call("","rsparam_get",null,n,["additionalParams"])})}(window,document,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-3"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJSaXNlVmlzaW9uIiwiSW1hZ2UiLCJnYWRnZXRzIiwiaW5pdCIsInN0ciIsInN0b3JhZ2UiLCJpbWciLCJjbGFzc05hbWUiLCJwYXJhbXMiLCJwb3NpdGlvbiIsInNjYWxlVG9GaXQiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsImJhY2tncm91bmQiLCJjb2xvciIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJ1cmwiLCJzcGxpdCIsInNlcGFyYXRvciIsImJhY2tncm91bmRJbWFnZSIsIkRhdGUiLCJnZXRUaW1lIiwic3RhcnRUaW1lciIsInJlYWR5IiwibWVzc2FnZSIsIkNvbW1vbiIsIk1lc3NhZ2UiLCJnZXRFbGVtZW50QnlJZCIsInNob3ciLCJTdG9yYWdlIiwibm9TdG9yYWdlRmlsZSIsInNldFRpbWVvdXQiLCJyZWZyZXNoSW50ZXJ2YWwiLCJnZXRBZGRpdGlvbmFsUGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJoZWlnaHQiLCJwcmVmcyIsImdldEludCIsInJwYyIsImNhbGwiLCJnZXRTdHJpbmciLCJzdG9yYWdlRmlsZVVwZGF0ZSIsImhpZGUiLCJQcmVmcyIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJlIiwiY29uc29sZSIsIndhcm4iLCJfYWN0aXZlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZGlzcGxheSIsInZpc2liaWxpdHkiLCJwIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXRhaWwiLCJyZXBsYWNlIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJjb21wYW55SWQiLCJnbyIsIndpbmRvdyIsImlkIiwib25jb250ZXh0bWVudSIsIm9ubW91c2Vkb3duIiwicmVnaXN0ZXIiLCJfZ2FxIiwicHVzaCIsImdhIiwidHlwZSIsImFzeW5jIiwic3JjIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQVFBLEdBTnVCLG1CQUFaQSxVQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix3QkFDM0JBLFNBQVMsZ0JBQWlCLFNBR1QsbUJBQVhDLFFBQ1QsR0FBSUEsU0FDRkMsWUFBYSxPQU1qQixJQUFJQyxZQUFhQSxjQUNqQkEsWUFBV0MsU0FFWEQsV0FBV0MsTUFBUSxTQUFXQyxHQUM1QixZQVlBLFNBQVNDLEtBQ1AsR0FDRUMsR0FERUMsRUFBVSxJQUdkQyxHQUFJQyxVQUFZQyxFQUFPQyxTQUN2QkgsRUFBSUMsVUFBWUMsRUFBT0UsV0FBYUosRUFBSUMsVUFBWSxnQkFBa0JELEVBQUlDLFVBQzFFSSxTQUFTQyxLQUFLQyxNQUFNQyxXQUFhTixFQUFPTSxXQUFXQyxNQUVSLElBQXZDQyxPQUFPQyxLQUFLVCxFQUFPSCxTQUFTYSxRQUM5QmQsRUFBTUksRUFBT1csSUFBSUMsTUFBTSxLQUdyQkMsRUFEaUIsSUFBZmpCLEVBQUljLE9BQ00sSUFHQSxJQUdkWixFQUFJTyxNQUFNUyxnQkFBa0IsT0FBU2QsRUFBT1csSUFBTUUsRUFBWSxPQUFRLEdBQUlFLE9BQU9DLFVBQVksSUFDN0ZDLElBQ0FDLE1BS0FDLEVBQVUsR0FBSTNCLFlBQVc0QixPQUFPQyxRQUFRbEIsU0FBU21CLGVBQWUsYUFDOURuQixTQUFTbUIsZUFBZSxxQkFHMUJILEVBQVFJLEtBQUssK0NBRWIxQixFQUFVLEdBQUlMLFlBQVdDLE1BQU0rQixRQUFReEIsR0FDdkNILEVBQVFGLE9BRVJ1QixLQUlKLFFBQVNPLEtB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QU92RSxPQUFPQyxhQUNuQ00sRUFBUXdFLEtBR1YsT0FDRTFFLEtBQVFBLElBS1osU0FBVzJFLEVBQVFuRSxFQUFVVCxHQUMzQixZQUVBLElBQUk2RSxJQUFLLEdBQUk3RSxHQUFRaUQsT0FBUUgsVUFBVSxLQUV2QzhCLEdBQU9FLGNBQWdCLFdBQ3JCLE9BQU8sR0FHVHJFLEVBQVNDLEtBQUtxRSxZQUFjLFdBQzFCLE9BQU8sR0FHVEgsRUFBT1AsaUJBQWlCLHFCQUFzQixXQUM1Q3JFLEVBQVE0QyxJQUFJb0MsU0FBUyxlQUFpQkgsRUFBSS9FLFdBQVdDLE1BQU1tQyxxQkFDM0RsQyxFQUFRNEMsSUFBSUMsS0FBSyxHQUFJLGNBQWUsS0FBTWdDLEdBQUssd0JBRWhERCxPQUFRbkUsU0FBVVQsUUFHckIsSUFBSWlGLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLMUUsU0FBU3lELGNBQWMsU0FBV2lCLEdBQUdDLEtBQU8sa0JBQW1CRCxFQUFHRSxPQUFRLEVBQ25GRixFQUFHRyxLQUFPLFVBQVk3RSxTQUFTOEUsU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSWhGLFNBQVNpRixxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhVCxFQUFJTSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGNvbmZpZzogdHJ1ZSAqL1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xufVxuXG5pZiAodHlwZW9mIGNvbmZpZyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICB2YXIgY29uZmlnID0ge1xuICAgIFNUT1JBR0VfRU5WOiBcInByb2RcIlxuICB9O1xufVxuXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkltYWdlID0ge307XG5cblJpc2VWaXNpb24uSW1hZ2UgPSAoZnVuY3Rpb24gKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHBhcmFtcyxcbiAgICBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZVwiKSxcbiAgICBzZXBhcmF0b3IgPSBcIlwiLFxuICAgIG1lc3NhZ2UgPSBudWxsLFxuICAgIHJlZnJlc2hJbnRlcnZhbCA9IDMwMDAwMDsgIC8vIDUgbWludXRlc1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBudWxsLFxuICAgICAgc3RyO1xuXG4gICAgaW1nLmNsYXNzTmFtZSA9IHBhcmFtcy5wb3NpdGlvbjtcbiAgICBpbWcuY2xhc3NOYW1lID0gcGFyYW1zLnNjYWxlVG9GaXQgPyBpbWcuY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCIgOiBpbWcuY2xhc3NOYW1lO1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IHBhcmFtcy5iYWNrZ3JvdW5kLmNvbG9yO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHBhcmFtcy5zdG9yYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHN0ciA9IHBhcmFtcy51cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBzZXBhcmF0b3IgPSBcIj9cIjtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZXBhcmF0b3IgPSBcIiZcIjtcbiAgICAgIH1cblxuICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgcGFyYW1zLnVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiKVwiO1xuICAgICAgc3RhcnRUaW1lcigpO1xuICAgICAgcmVhZHkoKTtcbiAgICB9XG4gICAgLy8gUmlzZSBTdG9yYWdlXG4gICAgZWxzZSB7XG4gICAgICAvLyBjcmVhdGUgaW5zdGFuY2Ugb2YgbWVzc2FnZVxuICAgICAgbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgICAvLyBzaG93IHdhaXQgbWVzc2FnZSB3aGlsZSBTdG9yYWdlIGluaXRpYWxpemVzXG4gICAgICBtZXNzYWdlLnNob3coXCJQbGVhc2Ugd2FpdCB3aGlsZSB5b3VyIGltYWdlIGlzIGRvd25sb2FkZWQuXCIpO1xuXG4gICAgICBzdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uSW1hZ2UuU3RvcmFnZShwYXJhbXMpO1xuICAgICAgc3RvcmFnZS5pbml0KCk7XG5cbiAgICAgIHJlYWR5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbm9TdG9yYWdlRmlsZSgpIHtcbiAgICBtZXNzYWdlLnNob3coXCJUaGUgc2VsZWN0ZWQgaW1hZ2UgZG9lcyBub3QgZXhpc3QuXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRUaW1lcigpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgcGFyYW1zLnVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiKVwiO1xuICAgICAgc3RhcnRUaW1lcigpO1xuICAgIH0sIHJlZnJlc2hJbnRlcnZhbCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldEFkZGl0aW9uYWxQYXJhbXMobmFtZXMsIHZhbHVlcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIG5hbWVzWzBdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXJhbXMgPSBKU09OLnBhcnNlKHZhbHVlc1swXSk7XG5cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuICAgICAgICBpbml0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksIGZhbHNlLFxuICAgICAgZmFsc2UsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9yYWdlRmlsZVVwZGF0ZSgpIHtcbiAgICAvLyByZW1vdmUgYSBtZXNzYWdlIHByZXZpb3VzbHkgc2hvd25cbiAgICBtZXNzYWdlLmhpZGUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRBZGRpdGlvbmFsUGFyYW1zXCI6IGdldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJub1N0b3JhZ2VGaWxlXCI6IG5vU3RvcmFnZUZpbGUsXG4gICAgXCJzdG9yYWdlRmlsZVVwZGF0ZVwiOiBzdG9yYWdlRmlsZVVwZGF0ZVxuICB9O1xufSkoZ2FkZ2V0cyk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FjdGl2ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIHRyeSB7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG1haW5Db250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNhbid0IGluaXRpYWxpemUgTWVzc2FnZSAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoX2FjdGl2ZSkge1xuICAgICAgLy8gY2xlYXIgY29udGVudCBvZiBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgd2hpbGUgKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cobWVzc2FnZSkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHA7XG5cbiAgICBpZiAoIV9hY3RpdmUpIHtcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBfaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgXCJoaWRlXCI6IGhpZGUsXG4gICAgXCJzaG93XCI6IHNob3dcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcgKi9cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uSW1hZ2UgPSBSaXNlVmlzaW9uLkltYWdlIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkltYWdlLlN0b3JhZ2UgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJyaXNlLXN0b3JhZ2VcIiksXG4gICAgICBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlXCIpO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcbiAgICAgICAgLy8gRXNjYXBlIHNpbmdsZSBxdW90ZXMuXG4gICAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyBlLmRldGFpbC51cmwucmVwbGFjZShcIidcIiwgXCJcXFxcJ1wiKSArIFwiJylcIjtcblxuICAgICAgICBSaXNlVmlzaW9uLkltYWdlLnN0b3JhZ2VGaWxlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZmlsZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGNsZWFyIHRoZSBleGlzdGluZyBpbWFnZVxuICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmQgPSBcIlwiO1xuXG4gICAgICBSaXNlVmlzaW9uLkltYWdlLm5vU3RvcmFnZUZpbGUoKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIHBhcmFtcy5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBwYXJhbXMuc3RvcmFnZS5maWxlTmFtZSk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgcGFyYW1zLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBSaXNlVmlzaW9uLCBnYWRnZXRzICovXG4oZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQsIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIGlkID0gbmV3IGdhZGdldHMuUHJlZnMoKS5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBmdW5jdGlvbigpIHtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIFJpc2VWaXNpb24uSW1hZ2UuZ2V0QWRkaXRpb25hbFBhcmFtcyk7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgfSk7XG59KSh3aW5kb3csIGRvY3VtZW50LCBnYWRnZXRzKTtcblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0zJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
